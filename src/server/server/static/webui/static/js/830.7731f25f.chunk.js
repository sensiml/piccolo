"use strict";(self.webpackChunksensiml_web=self.webpackChunksensiml_web||[]).push([[830],{20210:(e,a,t)=>{t.d(a,{$:()=>y});var l=t(65043),i=t(53536),n=t.n(i),o=t(11906),r=t(98533),s=t(96446),d=t(67784),c=t(7426),u=t(59478),m=t(7478),p=t(51787),h=t(70579);const x=e=>{let{presetColors:a,defautColor:t,label:i,onUpdate:n}=e;const o=(0,m.A)((e=>({colorBox:{marginRight:e.spacing(1),height:e.spacing(3),width:e.spacing(3),cursor:"pointer",transition:e.transitions.create(["all"],{duration:e.transitions.duration.complex}),"&:hover":{transform:"scale(1.15)"}}})))(),[r,c]=(0,l.useState)(!1),[x,f]=(0,l.useState)(""),g=e=>{f(e),n(e)};return(0,l.useEffect)((()=>{f(t)}),[t]),(0,h.jsxs)("div",{style:{width:"100%"},children:[(0,h.jsx)(d.A,{autoFocus:!0,margin:"dense",id:"labelColorPicker",label:i,value:x,onChange:e=>{var a;return g((null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)||"")},fullWidth:!0,variant:"outlined",InputProps:{startAdornment:(0,h.jsx)(p.A,{position:"start",children:(0,h.jsx)(s.A,{className:o.colorBox,onClick:()=>c(!0),style:{background:x}})})}}),r?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(s.A,{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:()=>c(!1)}),(0,h.jsx)("div",{style:{position:"fixed",zIndex:"2"},children:(0,h.jsx)(u.Xq,{color:x,disableAlpha:!0,onChange:e=>g(e.hex),presetColors:a})})]}):null]})};x.defaultProps={presetColors:[],onUpdate:()=>{}};const f=x;var g=t(18545),v=t(4172),b=t(97557),j=t(81131);const A=e=>{let{isOpen:a,title:t,description:i,labelName:u,defaultLabelColor:m,getLabelNamesToCheck:p,labelGroupOptions:x,defaultLabelGroup:A,onClose:y,onSubmit:C,validationError:S}=e;const{t:D}=(0,c.B)("components"),[T,w]=(0,l.useState)(),[E,I]=(0,l.useState)(),[N,P]=(0,l.useState)(),[k,B]=(0,l.useState)(""),[M,O]=(0,l.useState)(!1),L=(0,l.useMemo)((()=>p(k||A).filter((e=>e!==n().toLower(u)&&e!==n().toLower(b.dG.value)))),[k,A,u,p]),_=(0,l.useMemo)((()=>E||m||(0,b.Vy)(L.length)),[E,L,m]),U=()=>{y()},z=()=>{O(!1),P(""),w("")};return(0,l.useEffect)((()=>{S&&(O(!1),P(S))}),[S]),(0,l.useEffect)((()=>{w(u)}),[u]),(0,l.useEffect)((()=>{a||z()}),[a]),(0,l.useEffect)((()=>()=>z()),[]),(0,h.jsx)(v.A,{disableEscapeKeyDown:!0,isOpen:a,onClose:U,title:t,actionsComponent:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.A,{onClick:U,color:"primary",variant:"outlined",fullWidth:!0,children:D("Cancel")}),(0,h.jsx)(o.A,{onClick:()=>{var e;((e=T)?!L.includes(n().toLower(e))||(P(D("dialog-form-label.validation-error-duplicate",{labelName:e})),0):(P(D("dialog-form-label.validation-error-empty")),0))&&(O(!0),C(T,_,k))},color:"primary",variant:"contained",fullWidth:!0,children:D("Save")})]}),children:(0,h.jsx)(h.Fragment,{children:M?(0,h.jsx)(j._S,{isOpen:!0}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.A,{id:"form-dialog-content",children:i}),(null===x||void 0===x?void 0:x.length)>1&&!u?(0,h.jsx)(s.A,{mb:2,children:(0,h.jsx)(g.A,{id:"select_label",name:"select_label",label:D("dialog-form-label.label-group"),options:x,variant:"outlined",margin:"dense",defaultValue:A,onChange:(e,a)=>{P(""),B(a)}})}):null,(0,h.jsx)(s.A,{marginBottom:2,children:(0,h.jsx)(d.A,{error:Boolean(N),helperText:N,autoFocus:!0,margin:"dense",id:"DialogFormlabelName",label:D("dialog-form-label.label-name"),required:!0,defaultValue:u,onChange:e=>{var a;P(""),w(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)},fullWidth:!0,variant:"outlined"})}),(0,h.jsx)(s.A,{marginBottom:2,children:(0,h.jsx)(f,{presetColors:b.ji,defautColor:_,label:D("dialog-form-label.label-color"),onUpdate:e=>{I(e)}})})]})})})};A.defaultProps={onSubmit:()=>{},onClose:()=>{}};const y=A},18545:(e,a,t)=>{t.d(a,{A:()=>v});var l=t(65043),i=t(53536),n=t.n(i),o=t(17392),r=t(22505),s=t(7478),d=t(96446),c=t(53193),u=t(79190),m=t(72221),p=t(32143),h=t(11906),x=t(71612),f=t(70579);const g=e=>{let{name:a,label:t,variant:i,options:g,defaultValue:v,id:b,labelId:j,addBtnText:A,onChange:y,onClickAdd:C,isCleared:S,fullWidth:D,isUpdateWithDefault:T=!0,isObserveDefaultValue:w=!1,disabled:E,...I}=e;const N=(0,s.A)((()=>({selectRoot:{width:"100%",display:"inline-grid"},selectWrapper:{display:"inline-grid",gridTemplateColumns:"auto 3rem",alignItems:"center"},addBtn:{display:"flex",justifyContent:"flex-start",paddingLeft:"1rem"}})))(),[P,k]=(0,l.useState)(""),B=()=>{n().isUndefined(v)||(k(v),T&&y(a,v))};(0,l.useEffect)((()=>{w||B()}),[]),(0,l.useEffect)((()=>{w&&B()}),[v]);return(0,f.jsx)(f.Fragment,{children:void 0!==P?(0,f.jsxs)(d.A,{className:"".concat(N.selectRoot," ").concat(S&&N.selectWrapper),children:[(0,f.jsxs)(c.A,{fullWidth:D,variant:i,children:[t?(0,f.jsx)(u.A,{id:j,children:t}):null,(0,f.jsxs)(m.A,{...I,labelId:j,id:b,value:P||"",onChange:e=>{var t,l;if((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)===P)k(""),y(a,null);else if(null!==e&&void 0!==e&&null!==(l=e.target)&&void 0!==l&&l.value){var i,n;k(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value),y(a,null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)}},name:a,label:t,disabled:E,children:[null!==g&&void 0!==g&&g.length?g.map(((e,a)=>(0,f.jsx)(p.A,{id:"".concat(b,"_").concat(a),value:e.value,children:e.name},"".concat(b,"_").concat(a,"_").concat(e.value)))):(0,f.jsx)(f.Fragment,{}),C?(0,f.jsx)(h.A,{className:N.addBtn,color:"primary",fullWidth:!0,startIcon:(0,f.jsx)(r.A,{}),onClick:()=>{C&&C()},children:A}):null]})]}),S?(0,f.jsx)(o.A,{onClick:()=>{k(""),y(a,null)},"aria-label":"delete",size:"large",children:(0,f.jsx)(x.A,{})}):null]}):null})};g.defaultProps={isCleared:!1,fullWidth:!0};const v=g},46342:(e,a,t)=>{t.d(a,{A:()=>r});var l=t(65043),i=t(53193),n=t(67784),o=t(70579);const r=e=>{let{defaultValue:a,helperText:t,error:r,name:s,label:d,onChange:c,className:u,id:m,fullWidth:p=!0,isUpdateWithDefault:h=!0,isObserveDefaultValue:x=!1,...f}=e;const[g,v]=(0,l.useState)("");(0,l.useEffect)((()=>{void 0!==a&&(v(a),h&&c(s,a))}),[]),(0,l.useEffect)((()=>{void 0!==a&&x&&(v(a),x&&c(s,a))}),[a]);return(0,o.jsx)(i.A,{fullWidth:p,children:(0,o.jsx)(n.A,{id:m,className:u,value:g,label:d,error:r,onChange:e=>{var a;a=e.target.value,v(a),c(s,e.target.value)},helperText:t,...f})})}},14381:(e,a,t)=>{t.d(a,{A:()=>o});t(65043);var l=t(7478),i=t(96446),n=t(70579);const o=e=>{let{name:a,color:t,className:o=""}=e;const r=(0,l.A)((e=>({wrapper:{display:"flex",alignItems:"center",width:"100%"},colorBox:{marginRight:e.spacing(1),height:"1rem",width:"1rem"}})))();return(0,n.jsxs)(i.A,{className:r.wrapper,children:[(0,n.jsx)(i.A,{className:r.colorBox,style:{background:t}}),(0,n.jsx)("span",{className:"".concat(r.name," ").concat(o),children:a})]})}},14274:(e,a,t)=>{t.d(a,{A:()=>r});t(65043);var l=t(72437),i=t(32143),n=t(34815),o=t(70579);const r=e=>{let{archorEl:a,isOpen:t,onClose:r,onDownloadPipeline:s}=e;const{DOWNLOAD_TYPES:d}=n.PIPELINE_CONSTS;return(0,o.jsxs)(l.A,{id:"menu-appbar",anchorEl:a,open:t,onClose:()=>r(),MenuListProps:{"aria-labelledby":"pipeline-export-menu"},children:[(0,o.jsx)(i.A,{onClick:e=>s(d.JSON),children:"Export as JSON "}),(0,o.jsx)(i.A,{onClick:e=>s(d.PYTHON),children:"Export as Python"}),(0,o.jsx)(i.A,{onClick:e=>s(d.IPYNB),children:"Export as IPYNB"})]})}},28537:(e,a,t)=>{t.d(a,{A:()=>_});var l=t(97508),i=t(38916),n=t(19490),o=t(28704),r=t(65043),s=t(53536),d=t.n(s),c=t(91688),u=t(7426),m=t(77739),p=t(17392),h=t(1995),x=t(12220),f=t(81637),g=t(63471),v=t(39423),b=t(11313),j=t(40430),A=t(2865),y=t(5259),C=t(75882),S=t(14274),D=t(41104),T=t(34294),w=t(97111),E=t(95004),I=t(52437),N=t(5011),P=t(6011),k=t(7478);const B=()=>(0,k.A)((e=>({...e.common,root:{flexGrow:1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})))();var M=t(70579);const O=e=>{let{onUpdateProjectAction:a,selectedProject:t,pipelines:l,knowledgepacks:i,loadKnowledgepacks:n,deletePipeline:o,loadPipelines:s,exportPipeline:k}=e;const{t:O}=(0,u.B)("pipelines"),L=B(),_=(0,c.useHistory)(),[U,z]=(0,r.useState)([]),[F,V]=(0,r.useState)(!1),[W,R]=(0,r.useState)(!1),[$,H]=(0,r.useState)(""),[q,Q]=(0,r.useState)("success"),[G,K]=(0,r.useState)(!1),[Z,Y]=(0,r.useState)([]),[X,J]=(0,r.useState)(""),[ee,ae]=r.useState(null),[te,le]=(0,r.useState)(0),[ie,ne]=(0,r.useState)(null),[oe,re]=(0,r.useState)(),se=Boolean(ie),de=(0,r.useMemo)((()=>{const e="".concat(O("table.dialog-delete-model-counts-text",{modelCounts:te})," "),a=null!==Z&&void 0!==Z&&Z.length?O("table.dialog-delete-multi-text",{count:null===Z||void 0===Z?void 0:Z.length}):O("table.dialog-delete-text",{selectedPipelineName:ee});return"".concat(te?e:"").concat(a)}),[te,ee,Z]),ce=(0,r.useMemo)((()=>d().isEmpty(Z)),[Z]),ue=(0,r.useMemo)((()=>d().union(Z,[X]).filter((e=>e))),[Z,X]),me=(e,a)=>{"clickaway"!==a&&R(!1)},pe=(e,a,t)=>{le(t),ae(a),J(e),V(!0)},he=()=>{J(""),V(!1)},xe=e=>D.A.convertToLocalDateTime(e),fe=(e,a)=>{H(a),Q(e),R(!0)},ge=[{title:"Name",field:"name",primary:!0,sortable:!0,type:I.$.Text,filterable:!0,render:(e,a)=>(0,M.jsx)(N.H,{color:"primary",onClick:e=>{return l=a.uuid,void _.push((0,c.generatePath)(w.bw.MAIN.MODEL_BUILD.child.AUTOML_BUILDER_SCREEN.path,{projectUUID:t,pipelineUUID:l}),{isOptimizeAutoMLParams:!0});var l},tooltipTitle:"Open ".concat(e),children:e})},{title:"Knowledge Pack Count",field:"kpCount",sortable:!0,type:I.$.Numeric,filterable:!0},{title:"Created Date",field:"created_at",sortable:!0,type:I.$.DateTime,filterable:!0,render:xe},{title:"Modified Date",field:"last_modified",sortable:!0,type:I.$.DateTime,filterable:!0,render:xe},{title:"UUID",field:"uuid",sortable:!0,type:I.$.Text,filterable:!0},{title:"Running",field:"active",sortable:!0,render:e=>(0,M.jsx)("div",{children:!0===e?(0,M.jsx)(m.A,{title:"Pipeline currently executing.",children:(0,M.jsx)(v.A,{variant:"contained",color:"primary",size:"small"})}):(0,M.jsx)("div",{})}),filterable:!0},{title:"CPU Usage (Minutes)",field:"cpu_clock_time",sortable:!0,render:e=>(0,M.jsx)(m.A,{title:O("table.tooltip-cpu-time"),children:(0,M.jsx)("div",{children:(e/60).toFixed(1)})}),filterable:!0},{title:"Export",field:"uuid",render:(e,a)=>(0,M.jsx)(m.A,{title:O("table.tooltip-download"),children:(0,M.jsx)(p.A,{variant:"contained",color:"primary",size:"small",onClick:a=>(a=>{ne(a.currentTarget),re(e)})(a),download:"".concat(a.name,".json"),children:(0,M.jsx)(A.A,{})})})},{title:"Delete",field:"uuid",render:(e,a)=>(0,M.jsx)(m.A,{title:"Delete Pipeline",children:(0,M.jsx)(p.A,{variant:"contained",color:"primary",size:"small",disabled:!ce,onClick:()=>pe(e,a.name,a.kpCount),children:(0,M.jsx)(g.A,{})})})}];(0,r.useEffect)((()=>{l&&l.data&&i&&i.data&&l.data.forEach((e=>{e.kpCount=i.data.filter((a=>a.sandbox_uuid===e.uuid)).length})),l.data=D.A.sortObjects(l.data||[{}],"last_modified",!1,"dsc"),z(l)}),[l,i]);const ve={rowsPerPage:25,rowsPerPageOptions:[5,10,25,50,100,"All"],showPagination:!0,applyFilters:!0,isDarkHeader:!0,isShowSelection:!0,selectionField:"uuid",onSelectInTable:e=>{Y(e)},noContentText:"No Pipelines"};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(P.f,{title:O("table.title"),onRefresh:()=>s(t),ActionComponent:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(T.U,{variant:"outlined",color:"primary",onClick:()=>pe(),ml:2,tooltip:O("Delete"),disabled:ce,text:O("Delete"),icon:(0,M.jsx)(g.A,{}),className:L.mr1}),(0,M.jsx)(T.U,{color:"primary",variant:"outlined",icon:(0,M.jsx)(b.A,{}),endIcon:(0,M.jsx)(j.A,{}),onClick:e=>ne(e.currentTarget),disabled:ce,text:O("Export")})]})}),(0,M.jsx)(y.A,{tableId:"pipelinesTable",tableColumns:ge,tableData:U,tableOptions:ve}),(0,M.jsx)(E.Z,{isOpen:F,title:O("table.dialog-delete-title"),text:de,onConfirm:async()=>{const e=[];K(!0);for(const a of ue){const l=await o(t,a);"success"!==l.status?fe("error",l.details):e.push(a)}e.includes(X)&&J(""),d().isEmpty(Z)||Y(Z.filter((a=>!e.includes(a)))),s(t),n(t),a&&a(),null!==e&&void 0!==e&&e.length&&fe("success","Successfully deleted the Pipeline ".concat(ee,".")),he(),K(!1)},onCancel:he,cancelText:O("dialog-confirm-delete.cancel"),confirmText:O("dialog-confirm-delete.delete"),isLoading:G}),(0,M.jsx)(h.A,{anchorOrigin:{vertical:"top",horizontal:"right"},open:W,autoHideDuration:2e3,onClose:me,children:(0,M.jsx)(C.A,{onClose:me,variant:q,message:$})}),(0,M.jsx)(x.A,{className:L.backdrop,open:G,children:(0,M.jsx)(f.A,{size:100})}),(0,M.jsx)(S.A,{archorEl:ie,isOpen:se,onClose:()=>{ne(null),oe&&re(null)},onDownloadPipeline:async e=>{if(oe)try{await k(t,oe,e)}catch(a){fe("error",a.message)}else for(const l of ue)try{await k(t,l,e)}catch(a){fe("error",a.message)}}})]})},L={loadModels:i.Zl,loadKnowledgepacks:n.R,deletePipeline:o.gP,loadPipelines:o.IR,exportPipeline:o.dU},_=(0,l.Ng)((e=>({selectedProject:e.projects.selectedProject.uuid,pipelines:e.pipelines.pipelineList,knowledgepacks:e.knowledgepacks})),L)(O)},29299:(e,a,t)=>{t.d(a,{A:()=>V});var l=t(97508),i=t(27802),n=t(65043),o=t(53536),r=t.n(o),s=t(7426),d=t(91688),c=t(77739),u=t(17392),m=t(1995),p=t(12220),h=t(81637),x=t(95540),f=t(63471),g=t(72126),v=t(5259),b=t(75882),j=t(43024),A=t(96446),y=t(69322),C=t(45119),S=t(1980),D=t(12490),T=t(7478);const w=()=>(0,T.A)((e=>({statusBox:{padding:"0.25rem 0.5rem",border:"2px solid ".concat(e.palette.notSelected.light),borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"flex-start",color:"gray",textTransform:"uppercase",width:e.spacing(14),gridGap:e.spacing(1)},statusBoxCached:{borderColor:e.palette.success.light,color:e.palette.success.light},statusBoxBuilding:{borderColor:e.palette.primary.main,color:e.palette.primary.main},statusBoxFailed:{borderColor:e.palette.error.main,color:e.palette.error.main}})))();var E=t(70579);const I=e=>{let{cacheStatus:a}=e;const{t:t}=(0,s.B)("queries"),l=w();return(0,E.jsx)(c.A,{title:(()=>{switch(a){case D.O.CACHED:return t("cache.cache");case D.O.BUILDING:return t("cache.building-cache");case D.O.FAILED:return t("cache.failed-building-cache");default:return t("cache.no-cache")}})(),children:(0,E.jsxs)(A.A,{className:(0,j.A)(l.statusBox,{[l.statusBoxCached]:a===D.O.CACHED,[l.statusBoxBuilding]:a===D.O.BUILDING,[l.statusBoxFailed]:a===D.O.FAILED}),children:[(()=>{switch(a){case D.O.CACHED:return(0,E.jsx)(C.A,{});case D.O.BUILDING:return(0,E.jsx)(y.A,{});default:return(0,E.jsx)(S.A,{})}})()," ",a||t("cache.no-cache-status-text")]})})};var N=t(41104),P=t(52437),k=t(95004),B=t(5011),M=t(97111),O=t(33206),L=t(6011),_=t(34294);const U=()=>(0,T.A)((e=>({...e.common,root:{flexGrow:1},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})))(),z=e=>{let{onUpdateProjectAction:a,queries:t,selectedProject:l,queryCacheStatusData:i,loadQueries:o,deleteQuery:j,setSelectedQuery:A,buildQueryCache:y,loadQueryCacheStatus:C,clearQueryCacheStatus:S}=e;const{t:T}=(0,s.B)("queries"),w=U(),z=(0,d.useHistory)(),[F,V]=(0,n.useState)([]),[W,R]=(0,n.useState)(!1),[$,H]=(0,n.useState)(!1),[q,Q]=(0,n.useState)(""),[G,K]=(0,n.useState)("success"),[Z,Y]=(0,n.useState)(!1),[X,J]=(0,n.useState)([]),[ee,ae]=(0,n.useState)(""),[te,le]=(0,n.useState)(null),[ie,ne]=(0,n.useState)(""),oe=(0,n.useMemo)((()=>null!==X&&void 0!==X&&X.length?T("table.dialog-delete-multi-text",{count:null===X||void 0===X?void 0:X.length}):T("table.dialog-delete-text",{selectedQueryName:te})),[te,X]),re=(0,n.useMemo)((()=>r().isEmpty(X)),[X]),se=(0,n.useMemo)((()=>r().union(X,[ee]).filter((e=>e))),[X,ee]);(0,n.useEffect)((()=>{t.data&&t.data.length>0&&t.data.forEach((e=>{e.columnList=e.columns.join(" "),e.query_segments=null==(null===e||void 0===e?void 0:e.summary_statistics)?"":e.summary_statistics.total_segments})),ie||(t.data=N.A.sortObjects(t.data||[{}],"last_modified_at",!1,"dsc")),V(t)}),[t]),(0,O.$$)((async()=>{await C(l,ie)}),ie?5e3:null),(0,n.useEffect)((()=>{void 0!==i.build_status&&i.build_status!==D.O.BUILDING&&i.build_status!==D.O.NOT_BUILT&&(ne(""),o(l))}),[i]),(0,n.useEffect)((()=>(o(l),()=>S())),[]);const de=(e,a)=>{A(a),z.push((0,d.generatePath)(M.bw.MAIN.DATA_EXPLORER.child.QUERY_DETAILS_SCREEN.path,{projectUUID:l,queryUUID:a}))},ce=(e,a)=>{"clickaway"!==a&&H(!1)},ue=(e,a,t)=>{le(t),ae(a),R(!0)},me=(e,a)=>{Q(a),K(e),H(!0)},pe=e=>N.A.convertToLocalDateTime(e),he=[{title:"Name",field:"name",primary:!0,sortable:!0,type:P.$.Text,filterable:!0,render:(e,a)=>(0,E.jsx)(B.H,{color:"primary",onClick:e=>de(0,a.uuid),tooltipTitle:"Open ".concat(e),children:e})},{title:"Columns",field:"columnList",sortable:!0,type:P.$.Text,filterable:!0},{title:"Filter",field:"metadata_filter",sortable:!0,type:P.$.Text,filterable:!0},{title:"Segments",field:"query_segments",sortable:!0,type:P.$.Text,filterable:!0},{title:"Last Modified",field:"last_modified",sortable:!0,type:P.$.DateTime,filterable:!0,render:pe},{title:"Created Date",field:"created_at",sortable:!0,type:P.$.DateTime,filterable:!0,render:e=>e.includes("z")&&e.includes("Z")?pe(e):pe("".concat(e,"z"))},{title:"UUID",field:"uuid",sortable:!0,type:P.$.Text,filterable:!0},{title:"Status",field:"task_status",sortable:!0,type:P.$.Text,filterable:!0,render:(e,a)=>(0,E.jsx)(I,{cacheStatus:a.task_status})},{title:"Rebuild",field:"uuid",render:(e,a)=>(0,E.jsx)(c.A,{title:"Build Cache",children:(0,E.jsx)(u.A,{variant:"contained",color:"primary",size:"small",onClick:a=>(async(e,a)=>{try{await y(l,a),ne(a)}catch(t){me("error",t.message)}})(0,e),disabled:Boolean(ie),children:(0,E.jsx)(g.A,{className:ie&&e===ie})})})},{title:"Manage",field:"uuid",render:e=>(0,E.jsx)(c.A,{title:"Manage Query",children:(0,E.jsx)(u.A,{variant:"contained",color:"primary",size:"small",onClick:a=>de(0,e),children:(0,E.jsx)(x.A,{})})})},{title:"Delete",field:"uuid",render:(e,a)=>(0,E.jsx)(c.A,{title:"Delete Query",children:(0,E.jsx)(u.A,{variant:"contained",color:"primary",size:"small",disabled:!re,onClick:t=>ue(0,e,a.name),children:(0,E.jsx)(f.A,{})})})}],xe={rowsPerPage:25,rowsPerPageOptions:[5,10,25,50,100,"All"],showPagination:!0,applyFilters:!0,isShowSelection:!0,selectionField:"uuid",onSelectInTable:e=>{J(e)},noContentText:"No Queries",excludePrimaryFromDetails:!0,isDarkHeader:!0};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(L.f,{title:T("table.title"),onRefresh:()=>o(l),ActionComponent:(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(_.U,{variant:"outlined",color:"primary",onClick:()=>ue(),tooltip:T("Delete Query"),text:T("Delete"),icon:(0,E.jsx)(f.A,{}),disabled:re,className:w.mr1})})}),(0,E.jsx)(v.A,{tableId:"queriesTable",tableColumns:he,tableData:F,tableOptions:xe}),(0,E.jsx)(k.Z,{isOpen:W,title:T("table.dialog-delete-title"),text:oe,onConfirm:async()=>{const e=[];Y(!0),R(!1);for(const a of se){const t=await j(l,a);"error"===t.status?(me("error",t.details),Y(!1)):e.push(a)}e.includes(ee)&&ae(""),r().isEmpty(X)||J(X.filter((a=>!e.includes(a)))),Y(!1),o(l),a(),r().isEmpty(e)||me("success",T("table.msg-success-delete",{count:null===e||void 0===e?void 0:e.length}))},onCancel:()=>{R(!1)},cancelText:T("dialog-confirm-delete.cancel"),confirmText:T("dialog-confirm-delete.delete")}),(0,E.jsx)(m.A,{anchorOrigin:{vertical:"top",horizontal:"right"},open:$,autoHideDuration:2e3,onClose:ce,children:(0,E.jsx)(b.A,{onClose:ce,variant:G,message:q})}),(0,E.jsx)(p.A,{className:w.backdrop,open:Z,children:(0,E.jsx)(h.A,{size:100})})]})};const F={loadQueries:i.P6,deleteQuery:i.yN,setSelectedQuery:i.iZ,buildQueryCache:i.$1,loadQueryCacheStatus:i.lw,clearQueryCacheStatus:i.QC},V=(0,l.Ng)((function(e){return{queries:e.queries.queryList,selectedProject:e.projects.selectedProject.uuid,queryCacheStatusData:e.queries.queryCacheStatus.data||{}}}),F)(z)},29765:(e,a,t)=>{t.d(a,{A:()=>r});t(65043);var l=t(85865),i=t(63336),n=t(96446),o=t(70579);const r=e=>{const{children:a,value:t,index:r,p:s=2,mt:d=2,...c}=e;return(0,o.jsx)(l.A,{component:"div",role:"tabpanel",hidden:t!==r,id:"full-width-tabpanel-".concat(r),"aria-labelledby":"full-width-tab-".concat(r),...c,children:t===r&&(0,o.jsx)(i.A,{elevation:0,children:(0,o.jsx)(n.A,{p:s,mt:d,children:a})})})}},48830:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Qe});var l=t(20697),i=t(20433),n=t(61703),o=t(58189),r=t(12826),s=t(16932),d=t(97508),c=t(65043),u=t(7426),m=t(91688),p=t(48625),h=t(75342),x=t(11906),f=t(96446),g=t(68903),v=t(63336),b=t(20991),j=t(24056),A=t(39336),y=t(33206),C=t(97111),S=t(82604),D=t.n(S),T=t(41104),w=t(77739),E=t(85865),I=t(12110),N=t(36591),P=t(17392),k=t(1130),B=t(83462),M=t(26600),O=t(35316),L=t(98533),_=t(29347),U=t(94327),z=t(95540),F=t(17035),V=t(93786),W=t(19599),R=t(42090),$=t(71043),H=t(78355),q=t(53456),Q=t(82462),G=t(19810),K=t(94329),Z=t(44208),Y=t(26480),X=t(85502),J=t(61199),ee=t.n(J),ae=t(30400),te=t(7478);const le=()=>(0,te.A)((e=>({root:{flexGrow:1},mainGrid:{marging:0,padding:e.spacing(2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},card:{margin:"auto",transition:"0.3s",boxShadow:"0 8px 40px -12px rgba(0,0,0,0.3)","&:hover":{boxShadow:"0 16px 70px -12.125px rgba(0,0,0,0.3)"}},media:{paddingTop:"56.25%"},content:{textAlign:"left",padding:7,minHeight:150},heading:{fontWeight:"bold"},subheading:{lineHeight:1.8},tabs:{"&:last-child":{position:"absolute",right:"0"}},boxBig:{minWidth:150,minHeight:60,paddingRight:10,paddingTop:3,margin:2},fieldTitleBig:{fontSize:20,color:e.palette.primary.main},fieldValueBig:{fontSize:25,lineHeight:1,paddingTop:15},dashboardIconBig:{fontSize:20,verticalAlign:"middle"},boxNormal:{minWidth:180,minHeight:60,paddingRight:20,margin:2},fieldTitleNormal:{fontSize:13,fontWeight:"bold",color:e.palette.primary.main},fieldValueNormal:{fontSize:20,fontWeight:"bold",float:"center"},dashboardIconNormal:{minWidth:50,fontSize:50,verticalAlign:"middle"},boxSmall:{minWidth:200,minHeight:40,paddingRight:20,margin:2},fieldTitleSmall:{fontSize:20,color:e.palette.primary.main},fieldValueSmall:{fontSize:17,lineHeight:1,float:"center"},dashboardIconSmall:{minWidth:25,fontSize:25,verticalAlign:"middle"},dataDescription:{width:"100%"},fieldContent:{margin:"auto",width:"60%",padding:10},dataOuterDiv:{display:"table",overflow:"hidden",height:"100%"},dataInnerDiv:{display:"table-cell",verticalAlign:"middle"},imageSelectorWrapper:{width:400},imageSelectionWrapper:{width:400,paddingTop:20},SelectedImageStyle:{width:385}})))();var ie=t(70579);const ne=e=>{let{setProjectImage:a}=e;const t=le(),[l,i]=c.useState([]);return(0,ie.jsx)(ee(),{value:l,onChange:e=>{i(e),e&&e.length>0&&a(e[0])},dataURLKey:"data_url",children:e=>{let{imageList:a,onImageUpload:l}=e;return(0,ie.jsxs)("span",{children:[(0,ie.jsx)("div",{className:t.imageSelectorWrapper,children:(0,ie.jsx)("span",{children:(0,ie.jsx)(w.A,{title:"Select Image",children:(0,ie.jsx)(x.A,{onClick:l,startIcon:(0,ie.jsx)(ae.A,{}),color:"primary",variant:"contained",children:"Select Image"})})})}),(0,ie.jsx)("div",{className:t.imageSelectionWrapper,children:a.map(((e,a)=>(0,ie.jsx)("div",{className:"image-item",children:(0,ie.jsx)("img",{src:e.data_url,alt:"",className:t.SelectedImageStyle})},a)))})]})}})},oe=(e,a,t,l,i,n,o)=>{return(0,ie.jsx)(f.A,{boxShadow:2,p:1,className:e.box,children:(0,ie.jsx)(g.Ay,{container:!0,direction:"column",spacing:0,children:(0,ie.jsx)(g.Ay,{container:!0,direction:"row",spacing:0,children:(0,ie.jsxs)(g.Ay,{item:!0,xs:12,children:[(0,ie.jsxs)(E.A,{className:e.fieldTitle,align:"left",gutterBottom:!0,children:[(r=i,s=e,d=n||a,(0,ie.jsx)(w.A,{title:d,children:(0,ie.jsx)(Z.A,{className:s.dashboardIcon,color:"primary",children:r})}))," ".concat(a)]}),(0,ie.jsx)(E.A,{className:e.fieldValue,align:o,children:" ".concat(t)})]})})})});var r,s,d},re=e=>{let{selectedProject:a,metadata:t,labelsData:l,sensorData:i,updateProject:n,uploadImage:o}=e;const r=le(),s={fieldTypeBig:{box:r.boxBig,fieldValue:r.fieldValueBig,dashboardIcon:r.dashboardIconBig,fieldTitle:r.fieldTitleBig,fieldContent:r.fieldContent,dataOuterDiv:r.dataOuterDiv,dataInnerDiv:r.dataInnerDiv,colOne:7,name:"Big"},fieldTypeNormal:{box:r.boxNormal,fieldValue:r.fieldValueBig,dashboardIcon:r.dashboardIconBig,fieldTitle:r.fieldTitleBig,fieldContent:r.fieldContent,dataOuterDiv:r.dataOuterDiv,dataInnerDiv:r.dataInnerDiv,colOne:3,name:"Normal"},fieldTypeSmall:{box:r.boxSmall,fieldValue:r.fieldValueSmall,dashboardIcon:r.dashboardIconBig,fieldTitle:r.fieldTitleSmall,fieldContent:r.fieldContent,dataOuterDiv:r.dataOuterDiv,dataInnerDiv:r.dataInnerDiv,colOne:6,name:"Small"}},[d,u]=c.useState(null),[m,p]=c.useState(null),[h,v]=c.useState(null),[b,j]=c.useState(null),[y,C]=c.useState(null),[S,Z]=c.useState(!1),[J,ee]=c.useState(!1),[ae,te]=c.useState(null),[re,se]=c.useState(null);(0,c.useEffect)((()=>{if(t&&!t.isFetching){p(t.data);const e=t.data.find((e=>"Device"===e.name));void 0!==e&&v(e.label_values)}}),[t]),(0,c.useEffect)((()=>{l&&!l.isFetching&&C(l.data)}),[l]),(0,c.useEffect)((()=>{i&&!i.isFetching&&j(i.data)}),[i]),(0,c.useEffect)((()=>{u(a),se(a.description),Z(!1)}),[a]);const de=e=>{ee(!1)};return(0,ie.jsxs)(g.Ay,{className:r.mainGrid,xs:12,item:!0,container:!0,direction:"row",alignItems:"stretch",spacing:1,children:[(0,ie.jsx)(g.Ay,{item:!0,xs:12,lg:4,children:(0,ie.jsxs)(I.A,{className:r.card,children:[(0,ie.jsx)(N.A,{component:"a",alt:"Contemplative Reptile",className:r.media,image:d?a.img?a.img.data_url:"".concat("http://localhost:8000/","project/").concat(d.uuid,"/image/"):null}),(0,ie.jsx)(g.Ay,{container:!0,direction:"row",spacing:0,justifyContent:"flex-end",children:(0,ie.jsx)(E.A,{className:"MuiTypography--heading",variant:"h5",gutterBottom:!0,children:(0,ie.jsx)(w.A,{title:"Change Image",children:(0,ie.jsx)(P.A,{onClick:e=>{ee(!0)},color:"primary",size:"large",children:(0,ie.jsx)(U.A,{})})})})})]})}),(0,ie.jsxs)(g.Ay,{lg:8,xs:12,item:!0,container:!0,direction:"row",alignItems:"stretch",spacing:0,children:[(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Captures",[d?d.files:""],0,(0,ie.jsx)(H.A,{fontSize:"inherit"}),"Total number of Capture Files.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Queries",[d?d.queries:""],0,(0,ie.jsx)(F.A,{fontSize:"inherit"}),"Total number Of Queries.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Pipelines",[d?d.pipelines:""],0,(0,ie.jsx)(W.A,{fontSize:"inherit"}),"Total number Of Pipelines.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Models",[d?d.models:""],0,(0,ie.jsx)($.A,{fontSize:"inherit"}),"Total number Of Knowledge Packs.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Segments",[d?d.segments:""],0,(0,ie.jsx)(Q.A,{fontSize:"inherit"}),"Total number Of Segments.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:!0,children:oe(s.fieldTypeBig,"Size(MB)",[d?d.size_mb:""],0,(0,ie.jsx)(K.A,{fontSize:"inherit"}),"Total size of all Capture Files.","right")}),(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:oe(s.fieldTypeSmall,"Created Date",[d?T.A.convertToLocalDateTime(d.created_at):""],0,(0,ie.jsx)(R.A,{fontSize:"inherit"}),"Project created date.","left")}),(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:oe(s.fieldTypeSmall,"UUID",[d?d.uuid:""],0,(0,ie.jsx)(R.A,{fontSize:"inherit"}),"Project unique identifier.","left")}),(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:oe(s.fieldTypeSmall,"Sensors",[b?b.join(", "):""],0,(0,ie.jsx)(V.A,{fontSize:"inherit"}),"Sensors captured by the device.","left")}),(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:oe(s.fieldTypeSmall,"Labels",y?y.map((e=>"".concat(e.name," : ").concat(e.label_values.map((e=>e.value)).join(", ")))):["N/A"],0,(0,ie.jsx)(q.A,{fontSize:"inherit"}),"Labels for the dataset","left")}),(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:oe(s.fieldTypeSmall,"Metadata",[m?m.map((e=>e.name)).join(", "):""],0,(0,ie.jsx)(G.A,{fontSize:"inherit"}),"Metadata associated with this project.","left")})]}),(0,ie.jsxs)(g.Ay,{item:!0,xs:12,children:[(0,ie.jsx)(f.A,{m:4,children:(0,ie.jsx)(A.A,{orientation:"horizontal"})}),(0,ie.jsxs)(g.Ay,{container:!0,direction:"row",spacing:0,justifyContent:"space-between",children:[(0,ie.jsxs)(E.A,{className:"MuiTypography--heading",variant:"h5",gutterBottom:!0,children:[(0,ie.jsxs)("b",{children:["Project Description: ",a.name," "]})," "]}),(0,ie.jsx)(E.A,{className:"MuiTypography--heading",variant:"h4",gutterBottom:!0,children:S?(0,ie.jsx)("span",{children:(0,ie.jsx)(w.A,{title:"Save Data Description",children:(0,ie.jsx)(P.A,{color:"primary",onClick:e=>{Z(!1),a.description!==re&&(a.description=re,n(a))},size:"large",children:(0,ie.jsx)(K.A,{})})})}):(0,ie.jsx)(w.A,{title:"Edit Data Description (Markdown)",children:(0,ie.jsx)(P.A,{color:"primary",onClick:e=>{Z(!0)},size:"large",children:(0,ie.jsx)(z.A,{})})})})]})]}),S?(0,ie.jsx)(k.h,{className:r.dataDescription,id:"dataDescription",variant:"outlined",value:re,onChange:e=>se(e.target.value),minRows:5}):(0,ie.jsx)(g.Ay,{children:(0,ie.jsx)(D(),{children:re})}),(0,ie.jsxs)(B.A,{disableEscapeKeyDown:!0,open:J,onClose:de,id:"renameKnowledgePack","aria-labelledby":"form-dialog-title",children:[(0,ie.jsx)(M.A,{id:"form-dialog-title",children:"Replace Project Image"}),(0,ie.jsx)(O.A,{children:(0,ie.jsxs)(L.A,{id:"form-dialog-content",children:["Please select an Image.",(0,ie.jsx)(ne,{setProjectImage:e=>{te(e)}})]})}),(0,ie.jsxs)(_.A,{id:"renameKnowledgepackActions",children:[(0,ie.jsx)(x.A,{onClick:de,startIcon:(0,ie.jsx)(X.A,{}),color:"primary",variant:"outlined",children:"Cancel"}),(0,ie.jsx)(x.A,{onClick:e=>{a.img=ae,o(ae.data_url,ae.file.name,d.uuid,(()=>{ee(!1)}))},startIcon:(0,ie.jsx)(Y.A,{}),color:"primary",variant:"outlined",children:"Upload"})]})]})]})},se={updateProject:i.vr,uploadImage:i.V6,loadProjects:i.RT},de=(0,d.Ng)((e=>({selectedProject:e.projects.selectedProject,metadata:e.metadata,labelsData:e.labels,sensorData:e.sources})),se)(re);var ce=t(29299),ue=t(28537),me=t(83746),pe=t(29765),he=t(1577),xe=t(53536),fe=t.n(xe),ge=t(63471),ve=t(5259),be=t(14381),je=t(95004),Ae=t(20210),ye=t(52437),Ce=t(6011);const Se=e=>{let{projectUUID:a,labelValues:t,labels:l,defaultLabel:i,createLabel:n,updateLabel:o,deleteLabel:r}=e;const{t:s}=(0,u.B)("components"),[d,m]=(0,c.useState)(!1),[p,h]=(0,c.useState)(""),[f,g]=(0,c.useState)({}),[v,b]=(0,c.useState)(""),[j,A]=(0,c.useState)(""),y=(0,c.useMemo)((()=>(null===l||void 0===l?void 0:l.length)>1||!1),[l]),C=(0,c.useMemo)((()=>fe().isEmpty(l)?[]:l.map((e=>({name:e.name,value:e.uuid})))),[l]),S=(0,c.useCallback)((e=>fe().isEmpty(t.data)?[]:t.data.filter((a=>a.labelUUID===e)).map((e=>fe().toLower(e.name)))),[t]),D=(0,c.useMemo)((()=>fe().isEmpty(t.data)?{}:t.data.find((e=>e.uuid===p))),[p]),E=()=>{g({})},I=()=>{m(!1)},N=e=>e?T.A.convertToLocalDateTime(e):"",k=e=>{h(e)},B=()=>{k("")};(0,c.useEffect)((()=>{A("")}),[f,d]),(0,c.useEffect)((()=>{b(null===i||void 0===i?void 0:i.uuid)}),[]),(0,c.useEffect)((()=>()=>b("")),[]);const M=[{title:s("label-values-table.header-name"),field:"name",primary:!0,sortable:!0,type:ye.$.Text,filterable:!0,render:(e,a)=>(0,ie.jsx)(be.A,{name:(null===a||void 0===a?void 0:a.name)||"",color:(null===a||void 0===a?void 0:a.color)||""})},y&&{title:s("label-values-table.header-label-group-name"),field:"label",primary:!0,sortable:!0,type:ye.$.Text,filterable:!0},{title:s("label-values-table.header-created"),field:"created",sortable:!0,type:ye.$.DateTime,filterable:!0,render:N},{title:s("label-values-table.header-updated"),field:"updated",sortable:!0,type:ye.$.DateTime,filterable:!0,render:N},{title:s("label-values-table.header-edit"),field:"uuid",render:e=>(0,ie.jsx)(w.A,{title:s("label-values-table.tooltip-edit-label"),children:(0,ie.jsx)(P.A,{variant:"contained",color:"primary",size:"small",onClick:()=>(e=>{const a=t.data.find((a=>a.uuid===e));g(a)})(e),children:(0,ie.jsx)(z.A,{})})})},{title:s("label-values-table.header-delete"),field:"uuid",render:e=>(0,ie.jsx)(w.A,{title:s("label-values-table.tooltip-delete-label"),children:(0,ie.jsx)(P.A,{variant:"contained",color:"primary",size:"small",onClick:()=>k(e),children:(0,ie.jsx)(ge.A,{})})})}],O=s("label-values-table.title"),L={rowsPerPage:20,showPagination:!1,noContentText:s("label-values-table.empty-content"),excludePrimaryFromDetails:!0,applyFilters:!0,isDarkHeader:!0};return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Ce.f,{title:O,ActionComponent:(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsx)(x.A,{variant:"outlined",color:"primary",onClick:()=>{m(!0)},children:s("label-values-table.panel-btn-add")})})}),(0,ie.jsx)(ve.A,{tableData:t,tableColumns:M,tableOptions:L}),fe().isEmpty(f)?null:(0,ie.jsx)(Ae.$,{isOpen:!fe().isEmpty(f),title:s("label-values-table.dialog-edit-title"),getLabelNamesToCheck:S,labelName:f.name,defaultLabelColor:f.color,labelGroupOptions:C,defaultLabelGroup:f.labelUUID,onClose:E,onSubmit:async(e,t,l)=>{try{await o(a,l||v,f.uuid,{value:e,color:t}),E()}catch(i){A(i.message)}},validationError:j}),d?(0,ie.jsx)(Ae.$,{isOpen:d,title:s("label-values-table.dialog-create-title"),getLabelNamesToCheck:S,labelGroupOptions:C,defaultLabelGroup:v,onClose:I,onSubmit:async(e,t,l)=>{try{await n(a,l||v,{value:e,color:t}),l&&b(l),I()}catch(i){A(i.message)}},validationError:j}):null,p?(0,ie.jsx)(je.Z,{isOpen:Boolean(p),title:s("label-values-table.alert-deleting-title"),text:s("label-values-table.alert-deleting-text",{labelName:null===D||void 0===D?void 0:D.name}),onConfirm:()=>{r(a,null===D||void 0===D?void 0:D.labelUUID,null===D||void 0===D?void 0:D.uuid),B()},onCancel:B,cancelText:s("dialog-confirm-delete.cancel"),confirmText:s("dialog-confirm-delete.delete")}):null]})};var De=t(73456),Te=t(67254),we=t(67784),Ee=t(74605),Ie=t(36694),Ne=t(4172);const Pe=e=>{let{isOpen:a,defaultName:t,defaultIsDropDown:l,title:i="",description:n="",metadataNames:o=[],validationError:r,onClose:s,onSubmit:d}=e;const{t:m}=(0,u.B)("components"),p=(0,te.A)((e=>({formWrap:{width:"100%",display:"flex",flexDirection:"column",marginBottom:e.spacing(3)}})))(),[h,g]=(0,c.useState)(),[v,b]=(0,c.useState)(!0),[j,A]=(0,c.useState)(),y=e=>{b(e)},C=()=>{s()};return(0,c.useEffect)((()=>()=>A("")),[]),(0,c.useEffect)((()=>{fe().isUndefined(l)||y(l)}),[l]),(0,c.useEffect)((()=>()=>g("")),[]),(0,ie.jsx)(Ne.A,{title:i,disableEscapeKeyDown:!0,isOpen:a,onClose:C,"aria-labelledby":i,actionsComponent:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(x.A,{onClick:C,color:"primary",variant:"outlined",fullWidth:!0,children:m("dialog-form-metadata.btn-action-cancel")}),(0,ie.jsx)(x.A,{onClick:()=>{var e;e=h,(fe().isEmpty(o.filter((e=>e!==t)).find((a=>fe().toLower(fe().trim(e))===fe().toLower(fe().trim(a)))))||(A(m("dialog-form-metadata-values.validation-error-duplicate",{name:e})),0))&&d(h||t,v)},color:"primary",variant:"contained",fullWidth:!0,children:m("dialog-form-metadata.btn-action-save")})]}),children:(0,ie.jsxs)(f.A,{children:[n||r?(0,ie.jsx)(f.A,{mt:1,mb:2,children:r?(0,ie.jsx)(Te.A,{severity:"error",children:r}):(0,ie.jsx)(Te.A,{severity:"info",children:n})}):null,(0,ie.jsx)(f.A,{className:p.formWrap,children:(0,ie.jsx)(we.A,{error:Boolean(j),helperText:j,autoFocus:!0,margin:"dense",id:"metadataName",label:m("dialog-form-metadata.label-name"),required:!0,defaultValue:t,onChange:e=>{var a;A(""),g(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)},fullWidth:!0})}),(0,ie.jsxs)(f.A,{className:p.formWrap,children:[(0,ie.jsx)(E.A,{gutterBottom:!0,children:m("dialog-form-metadata.label-type")}),(0,ie.jsxs)(f.A,{children:[(0,ie.jsx)(Ee.A,{value:"top",control:(0,ie.jsx)(Ie.A,{id:"isDropdownRaio",color:"primary",checked:v,onChange:e=>y(!0)}),label:m("dialog-form-metadata.label-type-dropdown"),labelPlacement:"start"}),(0,ie.jsx)(Ee.A,{value:"top",control:(0,ie.jsx)(Ie.A,{id:"isTextRaio",color:"primary",checked:!v,onChange:e=>y(!1)}),label:m("dialog-form-metadata.label-type-text"),labelPlacement:"start"})]}),(0,ie.jsx)(E.A,{variant:"caption",children:m(v?"dialog-form-metadata.type-dropdown-help":"dialog-form-metadata.type-text-help")})]})]})})};Pe.defaultProps={onSubmit:()=>{},onClose:()=>{}};const ke=Pe;var Be=t(11227),Me=t(22070),Oe=t(26240),Le=t(81131),_e=t(46342);const Ue=e=>{let{isOpen:a,title:t,description:l,defaultValues:i=[],onClose:n,onLoadMetadata:o,onCreate:r,onUpdate:s,onDelete:d}=e;const{t:m}=(0,u.B)("components"),p=(0,te.A)((e=>({formWrapper:{width:"100%",display:"flex",flexDirection:"column"},formWrap:{width:"100%",display:"flex",flexDirection:"column",marginBottom:e.spacing(2)},deleteBtn:{height:e.spacing(6),width:e.spacing(6),justifyContent:"flex-start",alignItems:"flex-start"},dictItemWrapper:{width:"100%",display:"inline-grid",gridTemplateColumns:"auto 2rem"}})))(),h=(0,Oe.A)(),[g,v]=(0,c.useState)({}),[b,j]=(0,c.useState)([]),[A,y]=(0,c.useState)(!1),[C,S]=(0,c.useState)(!1),[D,T]=(0,c.useState)([]),[E,I]=(0,c.useState)([]),[N,k]=(0,c.useState)(""),B=(0,c.useMemo)((()=>b.filter((e=>!D.includes(e.name)))),[b,D]),M=(0,c.useMemo)((()=>!fe().isEmpty(g)||fe().isEqual(i,B)),[g,B]),O=(0,c.useMemo)((()=>B.map((e=>e.value))),[B]),L=(0,c.useMemo)((()=>i.map((e=>e.name))),[i]),_=(0,c.useMemo)((()=>{var e,a;const t=(null===(e=b.find((e=>e.name===N)))||void 0===e?void 0:e.value)||"",l=(null===(a=i.find((e=>e.name===N)))||void 0===a?void 0:a.value)||"";return t!==l?"".concat(t," (").concat(l,")"):t||""}),[N,b,i]),U=(0,c.useMemo)((()=>B.filter((e=>e.isUpdated&&L.includes(e.name)))),[L,b,B]),z=(0,c.useMemo)((()=>B.filter((e=>E.includes(e.name)))||[]),[B,E]),F=(e,a)=>{v({...g,[e]:a})},V=()=>{v({})},W=()=>{y(!1),j([])},R=()=>{V(),W(),n()},$=()=>{fe().isEmpty(z)&&fe().isEmpty(D)&&fe().isEmpty(U)?R():S(!0)},H=(e,a,t)=>{V(),((e,a,t)=>{!(O.filter(((e,l)=>fe().toLower(fe().trim(e))===fe().toLower(fe().trim(a))&&l!==t)).length>0)||F(e,m("dialog-form-metadata-values.validation-error-duplicate"))})(e,a,t),j(b.map((t=>t.name===e?{...t,value:a,isUpdated:!0}:t)))},q=()=>{const e=fe().uniqueId();j([...b,{name:e,value:""}]),I([...E,e])};return(0,c.useEffect)((()=>()=>V()),[]),(0,c.useEffect)((()=>()=>W()),[]),(0,c.useEffect)((()=>{fe().isEmpty(i)?q():j(i)}),[]),(0,ie.jsxs)(Ne.A,{title:t,disableEscapeKeyDown:!0,isOpen:a,onClose:$,"aria-labelledby":t,actionsComponent:(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(x.A,{onClick:$,color:"primary",variant:"outlined",fullWidth:!0,children:m("dialog-form-metadata-values.btn-action-cancel")}),(0,ie.jsx)(x.A,{onClick:async()=>{const e={};let a=!0;b.forEach((e=>{var t,l;t=e.name,l=e.value,a=!!l||(F(t,m("dialog-form-metadata-values.validation-error-empty")),!1)})),a&&(y(!0),fe().isEmpty(D)||await Promise.all(D.filter((e=>L.includes(e))).map((async t=>{try{await d(t)}catch(l){a=!1,T(b.filter((e=>e!==t))),e[t]=l.message}}))),fe().isEmpty(U)||await Promise.all(U.filter((e=>!i.includes(e.value))).map((async t=>{try{await s(t.name,t.value)}catch(l){a=!1,e[t.name]=l.message}}))),fe().isEmpty(z)||await Promise.all(z.map((async t=>{try{await r(t.value),I(z.filter((e=>e!==t.name)))}catch(l){a=!1,e[t.name]=l.message}}))),v(e),y(!1),o(),a&&(V(),W(),n()))},color:"primary",variant:"contained",disabled:M,fullWidth:!0,children:m("dialog-form-metadata-values.btn-action-save")})]}),children:[(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(f.A,{mt:1,mb:2,children:(0,ie.jsx)(Te.A,{severity:"info",children:l})}),A?(0,ie.jsx)(Le._S,{isOpen:!0,type:"TailSpin"}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(f.A,{className:p.formWrapper,children:fe().isEmpty(b)?null:B.map(((e,a)=>(0,ie.jsxs)(f.A,{className:"".concat(p.formWrap," ").concat(p.dictItemWrapper),children:[(0,ie.jsx)(_e.A,{id:e.name,name:e.name,error:Boolean(g[e.name]),helperText:g[e.name],isUpdateWithDefault:!1,onChange:(e,t)=>H(e,t,a),defaultValue:null===e||void 0===e?void 0:e.value,variant:"outlined",margin:"dense",placeholder:m("dialog-form-metadata-values.placeholder-value"),disabled:!fe().isEmpty(g)&&!g[e.name],size:"small",required:!0,autoFocus:!0}),(0,ie.jsx)(f.A,{display:"flex",alignItems:"flex-end",flex:1,children:(0,ie.jsx)(w.A,{title:"",placement:"top",children:(0,ie.jsx)(P.A,{className:p.deleteBtn,onClick:a=>{return t=e.name,V(),void(L.includes(t)?k(t):(I(z.filter((e=>e!==t))),T([...D,t])));var t},size:"large",children:(0,ie.jsx)(Me.A,{style:{color:h.colorDeleteIcons}})})})})]},e.name)))}),(0,ie.jsx)(f.A,{className:p.formWrap,children:(0,ie.jsx)(x.A,{color:"primary",variant:"outlined",size:"small",startIcon:(0,ie.jsx)(Be.A,{}),onClick:q,children:m("dialog-form-metadata-values.btn-add")})})]})]}),N?(0,ie.jsx)(je.Z,{isOpen:Boolean(N),title:m("dialog-form-metadata-values.dialog-delete-alert-title"),text:m("dialog-form-metadata-values.dialog-delete-alert-description",{name:_}),onConfirm:()=>{k(""),T([...D,N])},onCancel:()=>k(""),cancelText:m("dialog-confirm-delete.cancel"),confirmText:m("dialog-confirm-delete.delete")}):null,C?(0,ie.jsx)(je.Z,{isOpen:C,title:m("dialog-form-metadata-values.dialog-alert-unsaved-title"),text:m("dialog-form-metadata-values.dialog-alert-unsaved-description",{name:_}),onCancel:()=>{S(!1)},onConfirm:R,cancelText:m("dialog-confirm-close.cancel"),confirmText:m("dialog-confirm-close.confirm")}):null]})};Ue.defaultProps={onUpdate:()=>{},onCreate:()=>{},onDelete:()=>{},onClose:()=>{},defaultValues:[]};const ze=Ue,Fe=e=>{let{projectUUID:a,metadata:t,loadMetadata:l,createMetadata:i,updateMetadata:n,deleteMetadata:o,createMetadataValue:r,updateMetadataValue:s,deleteMetadataValue:d}=e;const{t:m}=(0,u.B)("components"),[p,h]=(0,c.useState)(!1),[f,g]=(0,c.useState)(""),[v,b]=(0,c.useState)(""),[j,A]=(0,c.useState)(""),[y,C]=(0,c.useState)(""),S=(0,c.useMemo)((()=>!fe().isEmpty(null===t||void 0===t?void 0:t.data)&&fe().isArray(null===t||void 0===t?void 0:t.data)?t.data.map((e=>e.name)):[]),[t]),D=(0,c.useMemo)((()=>{if(!fe().isEmpty(null===t||void 0===t?void 0:t.data)&&fe().isArray(null===t||void 0===t?void 0:t.data)){const e=(null===t||void 0===t?void 0:t.data.find((e=>e.uuid===f)))||{};if(null!==e&&void 0!==e&&e.label_values)return null===e||void 0===e?void 0:e.label_values.map((e=>({name:e.uuid,value:e.value})))}return[]}),[f,t]),E=(0,c.useMemo)((()=>{var e;return!fe().isEmpty(null===t||void 0===t?void 0:t.data)&&fe().isArray(null===t||void 0===t?void 0:t.data)&&(null===t||void 0===t||null===(e=t.data.find((e=>e.uuid===f)))||void 0===e?void 0:e.name)||""}),[f,t]),I=(0,c.useMemo)((()=>!fe().isEmpty(null===t||void 0===t?void 0:t.data)&&fe().isArray(null===t||void 0===t?void 0:t.data)?null===t||void 0===t?void 0:t.data.find((e=>e.uuid===v)):{}),[v]),N=(0,c.useMemo)((()=>{var e;return!fe().isEmpty(null===t||void 0===t?void 0:t.data)&&fe().isArray(null===t||void 0===t?void 0:t.data)&&(null===t||void 0===t||null===(e=t.data.find((e=>e.uuid===y)))||void 0===e?void 0:e.name)||""}),[y,t]),k=()=>{j&&A("")},B=e=>e?T.A.convertToLocalDateTime(e):"",M=e=>{g(e)},O=()=>{h(!1),k()},L=()=>{b(!1),k()},_=[{title:m("metadata.header-name"),field:"name",primary:!0,sortable:!0,type:ye.$.Text,filterable:!0},{title:m("metadata.header-created"),field:"created_at",sortable:!0,type:ye.$.DateTime,filterable:!0,render:B},{title:m("metadata.header-updated"),field:"last_modified",sortable:!0,type:ye.$.DateTime,filterable:!0,render:B},{title:m("metadata.header-values"),field:"uuid",render:e=>(0,ie.jsx)(w.A,{title:m("metadata.tooltip-edit"),children:(0,ie.jsx)(P.A,{variant:"contained",color:"primary",size:"small",onClick:()=>M(e),children:(0,ie.jsx)(De.A,{})})})},{title:m("metadata.header-edit"),field:"uuid",render:e=>(0,ie.jsx)(w.A,{title:m("metadata.tooltip-edit"),children:(0,ie.jsx)(P.A,{variant:"contained",color:"primary",size:"small",onClick:()=>b(e),children:(0,ie.jsx)(z.A,{})})})},{title:m("metadata.header-delete"),field:"uuid",render:e=>(0,ie.jsx)(w.A,{title:m("metadata.tooltip-delete"),children:(0,ie.jsx)(P.A,{variant:"contained",color:"primary",size:"small",onClick:()=>C(e),children:(0,ie.jsx)(ge.A,{})})})}],U=m("metadata.title"),F={rowsPerPage:20,showPagination:!1,noContentText:m("metadata.empty-content"),excludePrimaryFromDetails:!0,applyFilters:!0,isDarkHeader:!0};return(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(Ce.f,{title:U,ActionComponent:(0,ie.jsx)(ie.Fragment,{children:(0,ie.jsx)(x.A,{variant:"outlined",color:"primary",onClick:()=>h(!0),children:m("metadata.panel-btn-add")})})}),(0,ie.jsx)(ve.A,{tableData:t,tableColumns:_,tableOptions:F}),(0,ie.jsx)(ke,{title:m("metadata.dialog-create-title"),isOpen:p,metadataNames:S,validationError:j,onClose:O,onSubmit:async(e,t)=>{try{const n=await i(a,e,t);l(a),O(),t&&M(null===n||void 0===n?void 0:n.uuid)}catch(n){A(n.message)}}}),(0,ie.jsx)(ke,{title:m("metadata.dialog-edit-title"),isOpen:Boolean(v),metadataNames:S,validationError:j,defaultName:(null===I||void 0===I?void 0:I.name)||"",defaultIsDropDown:null===I||void 0===I?void 0:I.is_dropdown,onClose:L,onSubmit:async(e,t)=>{try{await n(a,v,e,t),l(a),L()}catch(i){A(i.message)}}}),(0,ie.jsx)(ze,{title:m("metadata.dialog-values-edit-title"),description:m("metadata.dialog-values-edit-description",{name:E}),isOpen:Boolean(f),defaultValues:D,onClose:()=>{g("")},onLoadMetadata:()=>{l(a)},onCreate:async e=>{await r(a,f,e)},onUpdate:async(e,t)=>{await s(a,f,e,t)},onDelete:async e=>{await d(a,f,e)}},f),y?(0,ie.jsx)(je.Z,{isOpen:Boolean(y),title:m("metadata.dialog-delete-alert-title"),text:m("metadata.dialog-delete-alert-description",{name:N}),onConfirm:async()=>{try{await o(a,y),C(""),l(a)}catch(e){A(e.message)}},onCancel:()=>C(""),cancelText:m("dialog-confirm-delete.cancel"),confirmText:m("dialog-confirm-delete.delete")}):null]})};var Ve=t(34294);const We=()=>(0,te.A)((e=>({root:{flexGrow:1},resetedTab:{padding:0},mainHeader:{paddingLeft:10},box:{minHeight:400,paddingRight:5,paddingBottom:20},actionsBtns:{marginLeft:"auto",alignItems:"center",display:"flex"},summaryPanel:{minHeight:"70vh",background:e.backgroundElements},redreshButton:{marginTop:e.spacing(1)},rightAlign:{marginLeft:"auto",flat:"right"}})))();function Re(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}const $e=e=>{let{className:a,onClick:t,children:l,color:i}=e;return(0,ie.jsx)(x.A,{className:a,onClick:t,color:i,children:l})},He=e=>{let{projectData:a,labelValues:t,labels:l,metadataData:i,labelsIsFetching:n,defaultLabel:o,loadProjectSummaryData:r,loadProjectData:s,createLabelValue:d,updateLabelValue:x,deleteLabelValue:S,loadMetadata:D,createMetadata:T,updateMetadata:w,deleteMetadata:E,createMetadataValue:I,updateMetadataValue:N,deleteMetadataValue:P}=e;const k=We(),B=(0,m.useHistory)(),{t:M}=(0,u.B)("projects"),{projectUUID:O}=(0,m.useParams)(),[L,_]=(0,c.useState)(0),[U,z]=(0,c.useState)(0),F=()=>{r(O)},V=(0,y.M5)(),W=(0,y.fN)();return(0,ie.jsx)(f.A,{className:k.box,children:(0,ie.jsx)(g.Ay,{container:!0,children:(0,ie.jsxs)(g.Ay,{container:!0,className:k.grid,children:[(0,ie.jsx)(g.Ay,{item:!0,xs:12,children:(0,ie.jsx)(f.A,{mb:2,children:(0,ie.jsx)(he.A,{title:M(W?"project-control-panel.small-header":"project-control-panel.header",{projectName:V(a.name)}),actionsBtns:(0,ie.jsx)(Ve.U,{variant:"outlined",color:"primary",onClick:()=>{B.push(C.bw.MAIN.HOME.path)},tooltip:M("project-summary.change-project-btn"),text:M("project-summary.change-project-btn"),icon:(0,ie.jsx)(h.A,{})})})})}),(0,ie.jsxs)(g.Ay,{item:!0,xs:12,children:[(0,ie.jsx)(v.A,{elevation:0,children:(0,ie.jsx)(f.A,{mb:2,children:(0,ie.jsxs)(b.A,{id:"projectSummaryTabList",value:L,onChange:(e,a)=>{_(a)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:[(0,ie.jsx)(j.A,{label:"Overview",...Re(0)}),(0,ie.jsx)(j.A,{label:"Queries",...Re(2)}),(0,ie.jsx)(j.A,{label:"Pipelines",...Re(2)}),(0,ie.jsx)(j.A,{label:"Models",...Re(4)}),(0,ie.jsx)(j.A,{label:"Project Settings",...Re(5)}),(0,ie.jsx)(f.A,{className:k.actionsBtns,children:(0,ie.jsx)($e,{variant:"contained",color:"primary",className:k.rightAlign,onClick:e=>(r(O),void s(O)),children:(0,ie.jsx)(p.A,{})})})]})})}),(0,ie.jsx)(pe.A,{p:0,value:L,index:0,children:(0,ie.jsx)(de,{})}),(0,ie.jsx)(pe.A,{p:0,value:L,index:1,children:(0,ie.jsx)(ce.A,{onUpdateProjectAction:F})}),(0,ie.jsx)(pe.A,{p:0,value:L,index:2,children:(0,ie.jsx)(ue.A,{onUpdateProjectAction:F})}),(0,ie.jsx)(pe.A,{p:0,value:L,index:3,classes:{root:k.resetedTab},children:(0,ie.jsx)(me.A,{})}),(0,ie.jsxs)(pe.A,{p:0,value:L,index:4,classes:{root:k.resetedTab},children:[(0,ie.jsxs)(b.A,{id:"projectSummaryTabList",value:U,onChange:(e,a)=>{z(a)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:[(0,ie.jsx)(j.A,{label:"Segment Labels",...Re(1)}),(0,ie.jsx)(j.A,{label:"Metadata",...Re(1)})]}),(0,ie.jsx)(A.A,{}),(0,ie.jsx)(pe.A,{p:0,mt:0,value:U,index:0,children:(0,ie.jsx)(Se,{projectUUID:O,defaultLabel:o,labelValues:{data:t,isFetching:n},labels:l,createLabel:d,updateLabel:x,deleteLabel:S})}),(0,ie.jsx)(pe.A,{p:0,mt:0,value:U,index:1,children:(0,ie.jsx)(Fe,{projectUUID:O,metadata:{data:i,isFetching:!1},loadMetadata:D,createMetadata:T,updateMetadata:w,deleteMetadata:E,createMetadataValue:I,updateMetadataValue:N,deleteMetadataValue:P})})]})]})]})})})},qe={loadProjectData:i.SN,loadProjectSummaryData:i.yZ,setIsMainScreenLoading:l.AG,setSelectedProject:i.NR,createLabelValue:n.QM,updateLabelValue:n.rq,deleteLabelValue:n.d,loadMetadata:o._G,createMetadata:o.wR,updateMetadata:o.D5,deleteMetadata:o.$u,createMetadataValue:o.JC,updateMetadataValue:o.WV,deleteMetadataValue:o.qs},Qe=(0,d.Ng)((e=>{var a,t,l,i,n,o;return{projectData:(null===e||void 0===e||null===(a=e.projects)||void 0===a?void 0:a.selectedProject)||{},defaultLabel:(0,r.g5)(e),labelValues:(0,r.LN)()(e),labels:(null===(t=e.labels)||void 0===t?void 0:t.data)||[],metadataData:(0,s._8)(e),metadataDataIsFetching:(null===(l=e.metadata)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.isFetching)||!1,labelsIsFetching:(null===(n=e.labels)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.isFetching)||!1}}),qe)(He)},16932:(e,a,t)=>{t.d(a,{AG:()=>u,Ay:()=>d,_8:()=>c,cH:()=>s});var l=t(53536),i=t.n(l),n=t(52437),o=t(34815),r=t(61689);const s=e=>a=>{var t,l;return i().isEmpty(null===(t=a.metadata)||void 0===t?void 0:t.data)?{}:(null===(l=a.metadata)||void 0===l?void 0:l.data.find((a=>a.uuid===e)))||{}},d=e=>{var a,t;return i().isEmpty(null===(a=e.metadata)||void 0===a?void 0:a.data)?[]:null===(t=e.metadata)||void 0===t?void 0:t.data.map((e=>({...e,label_values:i().isEmpty(null===e||void 0===e?void 0:e.label_values)?[]:e.label_values.sort(((e,a)=>(0,r.tu)(e.value,a.value)))})))},c=e=>{var a,t;return i().isEmpty(null===(a=e.metadata)||void 0===a?void 0:a.data)?[]:null===(t=e.metadata)||void 0===t?void 0:t.data.map((e=>({...e,label_values:i().isEmpty(null===e||void 0===e?void 0:e.label_values)?[]:e.label_values.sort(((e,a)=>(0,r.tu)(e.value,a.value)))})))},u=e=>{var a,t;return i().isEmpty(null===(a=e.metadata)||void 0===a?void 0:a.data)?[]:null===(t=e.metadata)||void 0===t?void 0:t.data.filter((e=>null===e||void 0===e?void 0:e.metadata)).map((e=>({title:null===e||void 0===e?void 0:e.name,field:null===e||void 0===e?void 0:e.name,lookup:i().isArray(e.label_values)?e.label_values.reduce(((e,a)=>(e[a.value]=a.value,e)),{}):[],formType:e.is_dropdown?o.XF.FORM_SELECT_TYPE:o.XF.FORM_STRING_TYPE,sortable:!0,filterable:!0,type:n.$.Text})))}}}]);
//# sourceMappingURL=830.7731f25f.chunk.js.map