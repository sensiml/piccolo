"use strict";(self.webpackChunksensiml_web=self.webpackChunksensiml_web||[]).push([[293],{5766:(e,a,t)=>{t.d(a,{A:()=>A});var s=t(65043),l=t(53536),i=t.n(l),n=t(7478),r=t(72584),o=t(53193),c=t(79190),d=t(72221),m=t(74050),u=t(96446),x=t(43845),p=t(32143),h=t(48734),y=t(70579);const f=(0,n.A)((e=>({chips:{display:"flex",flexWrap:"wrap",gap:e.spacing(.25)},chip:{margin:e.spacing(.5)}}))),A=e=>{let{defaultValue:a,name:t,label:l,id:n,labelId:A,size:j,options:g,onChange:v,disabledOptions:b=[],fullWidth:N=!0,isUpdateWithDefault:_=!0,isObserveDefaultValue:E=!1,isFormHidden:w,defaultStep:S,maxElements:D,minElements:I,...F}=e;const C=f(),[M,U]=(0,s.useState)([]);(0,s.useEffect)((()=>{if(i().isEmpty(a)){const e=g.filter((e=>e.isDefault)).map((e=>e.value));U([...e]),_&&v(t,[...e])}else U([...a]),_&&v(t,a)}),[g]),(0,s.useEffect)((()=>{E&&U([...a])}),[a]);return(0,y.jsxs)(o.A,{fullWidth:N,size:j,children:[(0,y.jsx)(c.A,{id:A,children:l}),void 0!==M?(0,y.jsx)(d.A,{...F,id:n,labelId:A,value:M||[],onChange:e=>{var a,s;U(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value),v(t,null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value)},name:t,input:(0,y.jsx)(m.A,{id:"".concat(n,"_input"),label:l}),renderValue:e=>(0,y.jsx)("div",{className:C.chips,children:e.map((e=>(0,y.jsx)(u.A,{sx:{display:"flex",flexWrap:"wrap"},children:(0,y.jsx)(x.A,{label:e})},e)))}),multiple:!0,children:(null===g||void 0===g?void 0:g.length)&&g.map(((e,a)=>(0,y.jsxs)(p.A,{value:e.value,disabled:b.includes(e.value),children:[(0,y.jsx)(h.A,{primary:e.name}),M.indexOf(e.value)>-1?(0,y.jsx)(r.A,{color:"primary"}):" "]},"".concat(n,"_").concat(a))))}):null]})}},14381:(e,a,t)=>{t.d(a,{A:()=>n});t(65043);var s=t(7478),l=t(96446),i=t(70579);const n=e=>{let{name:a,color:t,className:n=""}=e;const r=(0,s.A)((e=>({wrapper:{display:"flex",alignItems:"center",width:"100%"},colorBox:{marginRight:e.spacing(1),height:"1rem",width:"1rem"}})))();return(0,i.jsxs)(l.A,{className:r.wrapper,children:[(0,i.jsx)(l.A,{className:r.colorBox,style:{background:t}}),(0,i.jsx)("span",{className:"".concat(r.name," ").concat(n),children:a})]})}},93531:(e,a,t)=>{t.d(a,{SE:()=>l,jQ:()=>i});const s={autosize:!0,autocolorscale:!0,displayModeBar:!0,displaylogo:!1,responsive:!0,modeBarButtonsToRemove:["pan2d","select2d","lasso2d","autoScale2d","toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]},l={...s},i={...s,responsive:!1}},55365:(e,a,t)=>{t.d(a,{al:()=>c,bO:()=>d});var s=t(65043),l=t(90537),i=t(76174),n=t(93531),r=t(70579);var o=t(26240);const c=e=>{let{data:a,title:t,height:c,width:d,$xaxis:m,$yaxis:u,boxmode:x}=e;const p=(0,o.A)(),[h,y]=(0,s.useState)(0),[f,A]=(0,s.useState)("1");return(0,s.useEffect)((()=>{y(h+1)}),[a]),(0,r.jsx)("div",{style:{width:"100%",position:"relative"},children:(0,r.jsx)(l.A,{data:a,revision:h,style:{width:"100%",height:"100%",opacity:f},layout:{type:"box",boxmode:x||"group",...i.kX,...c&&{height:c},...d&&{width:d},plot_bgcolor:p.plotBG,xaxis:{...i.kX.xaxis,...m},yaxis:{...i.kX.yaxis,...u},title:t},config:n.SE})})},d=e=>{let{data:a,title:t,height:o,width:c,onClick:d,$xaxis:m,$yaxis:u,$xaxis2:x,$yaxis2:p,layout:h}=e;const[y,f]=(0,s.useState)(0);return(0,s.useEffect)((()=>{f(y+1)}),[a,h,m,u]),(0,r.jsx)(l.A,{data:a,config:n.jQ,useResizeHandler:!0,style:{width:"100%",height:"100%"},onClick:e=>{f(y+1),d(e)},onHover:()=>{const e=document.getElementsByClassName("nsewdrag")[0];null!==e&&void 0!==e&&e.style&&(e.style.cursor="pointer")},layout:{...i.n,...o&&{height:o},...c&&{width:c},xaxis:{...i.n.xaxis,...m},yaxis:{...i.n.yaxis,...u},xaxis2:{...i.n.xaxis2,...x},yaxis2:{...i.n.yaxis2,...p},title:{text:t,font:{size:16,weight:"bold",fontFamily:["Open Sans","verdana","arial","sans-serif"]},xref:"paper"},...h},revision:y},"key-".concat(y))}},76174:(e,a,t)=>{t.d(a,{kX:()=>l,n:()=>i,x2:()=>n});const s={autosize:!0,margin:{l:70,r:50,b:70,t:50,pad:10},legend:{borderwidth:0,orientation:"h"},xaxis:{autorange:!0,rangemode:"tozero",showline:!1,color:"#455a64",zerolinecolor:"#eee",zerolinewidth:3,standoff:20},yaxis:{autosize:!0,rangemode:"tozero",autorange:!0,showline:!1,color:"#455a64",zerolinecolor:"#eee",zerolinewidth:3}},l={...s,margin:{l:80,r:80,b:100,t:70,pad:10},colorway:["#26c0c7","#5151d3","#e68619","#ffd215","#E65F8E","#A86BD1","#3AA5D1","#3BB58F","#3A63AD"],yaxis:{autosize:!0,anchor:"free",overlaying:"y",side:"right",position:1},legend:{...s.legend},legend2:{...s.legend}},i={...s,hovermode:"closest",mode:"markers",type:"scatter",x:[],y:[],autosize:!0,bargap:.3,barmode:"stack",xaxis:{...s.xaxis,domain:[0,.84],autorange:!1,showgrid:!0,title:{standoff:20},range:[0,255]},yaxis:{...s.xaxis,domain:[0,.84],autorange:!1,showgrid:!0,title:{standoff:20},range:[0,255]},legend:{x:1,xanchor:"right",yanchor:"top",y:1},xaxis2:{...s.xaxis,domain:[.85,1],autosize:!1,showgrid:!0,zeroline:!0},yaxis2:{...s.xaxis,domain:[.85,1],autosize:!1,showgrid:!0,zeroline:!0}},n={...s,margin:{l:50,r:150,b:200,t:50,pad:10},hovermode:"closest",mode:"markers",type:"scatter",autosize:!0,bargap:0,barmode:"stack",yaxis:{autosize:!0,anchor:"free",overlaying:"y",side:"right",position:1}}},57293:(e,a,t)=>{t.r(a),t.d(a,{default:()=>oa});var s=t(97508),l=t(38916),i=t(65043),n=t(96446),r=t(63336),o=t(20991),c=t(24056),d=t(85893),m=t(69986),u=t(68903),x=t(7478);const p=()=>(0,x.A)((e=>({root:{flexGrow:1},formControl:{margin:e.spacing(1),minWidth:393,"@media (max-width: 2600px)":{minWidth:800,maxWidth:1210},"@media (max-width: 2000px)":{minWidth:400,maxWidth:1210},"@media (max-width: 1450px)":{minWidth:390,maxWidth:650},"@media (max-width: 1250px)":{minWidth:400,maxWidth:600},"@media (max-width: 1050px)":{minWidth:400,maxWidth:600},"@media (max-width: 770px)":{minWidth:600,maxWidth:700}},flowWrapper:{display:"flex",justifyContent:"flex-end"},errorDiv:{marginTop:-22,minHeight:50},errorMessage:{color:e.palette.error.main},addNewButton:{marginRight:20,marginTop:20},pipelineDetails:{position:"sticky",top:"100px"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},nodeColor1:{backgroundColor:"#e3f2fd"},nodeColor2:{backgroundColor:"#e8eaf6"},nodeColor3:{backgroundColor:"#fff3e0"},nodeColor4:{backgroundColor:"#f9fbe7"},nodeColor5:{backgroundColor:"#cfd8dc"},nodeColor6:{backgroundColor:"#c8e6c9"},nodeColor7:{backgroundColor:"#e0f2f1"},nodeColor8:{backgroundColor:"#f1f8e9"}})))();var h=t(86067),y=t(36230),f=t(90445),A=t(71451),j=t(56202),g=t(32125),v=t(34109),b=t(46742),N=t(77739),_=t(85865),E=t(41104),w=t(12110),S=t(79958),D=t(81045),I=t(26494),F=t(67470),C=t(29864);const M=(0,x.A)((e=>({root:{mainWidth:345},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},card:{position:"sticky",top:"100px"},avatar:{backgroundColor:"".concat(F.A[500]," !important")},title:{},pos:{marginBottom:12},description:{whiteSpace:"pre-wrap"},descriptionExpander:{backgroundColor:"".concat(C.A[200]," !important")}})));var U=t(70579);function T(e){let{pipeline:a}=e;const t=M(),[l,n]=(0,i.useState)(null),[r,o]=(0,i.useState)(null),c=(0,s.d4)((e=>e.queries.queryList.data)),d=(0,s.d4)((e=>e.sessions.data));return(0,i.useEffect)((()=>{if(!a||"query"!==a.type||!c)return;const e=c.find((e=>e.name===a.name));n(e),o(d.find((a=>a.id===e.segmenter_id)))}),[a,c]),(0,U.jsxs)(w.A,{className:"".concat(t.root," ").concat(t.card),children:[(0,U.jsx)(S.A,{avatar:(0,U.jsx)(D.A,{"aria-label":a.type,className:t.avatar,children:Z(a.type)}),titleTypographyProps:{variant:"h4"},title:K(a.type)}),(0,U.jsx)(I.A,{children:(0,U.jsxs)(u.Ay,{container:!0,spacing:1,children:[(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:t.title,children:"Name:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:t.pos,children:a.name})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:t.title,children:"Type:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:t.pos,children:a.type})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),l?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:t.title,children:"Session:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:t.pos,children:(r||{name:""}).name})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:t.title,children:"Label:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:t.pos,children:l.label_column})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:t.title,children:"Metadata:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:t.pos,children:l.metadata_columns&&l.metadata_columns.length>0?l.metadata_columns.join(", "):""})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:t.title,children:"Source:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:t.pos,children:l.columns&&l.columns.length>0?l.columns.join(", "):""})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),E.A.isNullOrEmpty(l.metadata_filter)?null:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:t.title,children:"Query Filter:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:t.pos,children:l.metadata_filter})}),(0,U.jsx)(u.Ay,{item:!0,xs:1})]})]}):null]})})]})}var L=t(21337),P=t(43024),O=t(27600),k=t(17392),R=t(30279);function z(e){let{transform:a}=e;const t=M(),[s,l]=i.useState(!1);return a&&a.description?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(O.A,{disableSpacing:!0,children:(0,U.jsx)(N.A,{title:"Description",children:(0,U.jsx)(k.A,{className:(0,P.A)(t.expand,{[t.expandOpen]:s}),onClick:()=>{l(!s)},"aria-expanded":s,"aria-label":"show more",size:"large",children:(0,U.jsx)(D.A,{"aria-label":"description",className:t.descriptionExpander,children:(0,U.jsx)(L.A,{})})})})}),(0,U.jsx)(R.A,{in:s,timeout:"auto",unmountOnExit:!0,children:(0,U.jsxs)(I.A,{children:[(0,U.jsx)(_.A,{paragraph:!0,children:"Description:"}),(0,U.jsx)(_.A,{component:"span",children:(0,U.jsx)("pre",{className:t.description,children:a.description})})]})})]}):null}function V(e){let{pipeline:a,transforms:t}=e;const s=M(),[l,n]=(0,i.useState)([]);return(0,i.useEffect)((()=>{n(t.find((e=>e.name===a.name))||{})}),[a,t]),(0,U.jsxs)(w.A,{className:"".concat(s.root,", ").concat(s.card),children:[(0,U.jsx)(S.A,{avatar:(0,U.jsx)(D.A,{"aria-label":a.type,className:s.avatar,children:Z(a.type)}),titleTypographyProps:{variant:"h4"},title:K(a.type)}),(0,U.jsx)(I.A,{children:(0,U.jsxs)(u.Ay,{container:!0,spacing:1,children:[(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Name:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.name})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Type:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.type})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),l?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"SubType:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:l.subtype})}),(0,U.jsx)(u.Ay,{item:!0,xs:1})]}):null,J(l,a.inputs,s)]})}),(0,U.jsx)(z,{transform:l})]})}function X(e){let{pipeline:a,transforms:t}=e;const s=M(),[l,n]=(0,i.useState)(null);return(0,i.useEffect)((()=>{a&&t&&n(t.find((e=>e.name===a.name)))}),[a,t]),(0,U.jsxs)(w.A,{className:"".concat(s.root,", ").concat(s.card),children:[(0,U.jsx)(S.A,{avatar:(0,U.jsx)(D.A,{"aria-label":a.type,className:s.avatar,children:Z(a.type)}),titleTypographyProps:{variant:"h4"},title:K(a.type)}),(0,U.jsx)(I.A,{children:(0,U.jsxs)(u.Ay,{container:!0,spacing:1,children:[(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Name:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.name})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Type:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.type})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),J(l,a.inputs,s)]})}),(0,U.jsx)(z,{transform:l})]})}var W=t(53193),H=t(72221),B=t(32143);function Y(e){let{pipeline:a,transforms:t}=e;const s=M(),[l,r]=(0,i.useState)([]),[o,c]=(0,i.useState)(a?a.inputs:[]),[d,m]=(0,i.useState)(null),[x,p]=(0,i.useState)(null),[h,y]=(0,i.useState)(0);return(0,i.useEffect)((()=>{if(a&&a.set&&a.set.length>0){m(a.set.map((e=>e.function_name)));const e=a.set[0];p(e),y(0),r(t.find((a=>a.name===e.function_name))||{})}}),[a,t]),(0,U.jsxs)(w.A,{className:"".concat(s.root,", ").concat(s.card),children:[(0,U.jsx)(S.A,{avatar:(0,U.jsx)(D.A,{"aria-label":a.type,className:s.avatar,children:Z(a.type)}),titleTypographyProps:{variant:"h4"},title:K(a.type)}),(0,U.jsx)(I.A,{children:(0,U.jsxs)(u.Ay,{container:!0,spacing:1,children:[(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Name:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.name})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Type:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:l.type?l.type:a.type})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Number Of Functions:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.set.length})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),d?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Function:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(W.A,{fullWidth:!0,children:(0,U.jsx)(H.A,{name:"functions",value:h,onChange:e=>{const s=a.set[e.target.value];y(e.target.value),p(s),c(Object.assign({},s?s.inputs:[],a.inputs)),r(t.find((e=>e.name===s.function_name))||{})},children:d&&d.map(((e,a)=>(0,U.jsx)(B.A,{value:a,children:e},"".concat(e,"-").concat(a))))})})}),(0,U.jsx)(u.Ay,{item:!0,xs:1})]}):null,x&&x.inputs?(0,U.jsx)(u.Ay,{item:!0,xs:12,children:(0,U.jsxs)(n.A,{boxShadow:3,m:1,p:1,children:[(0,U.jsxs)(u.Ay,{container:!0,spacing:1,children:[(0,U.jsx)(u.Ay,{item:!0,xs:12,children:(0,U.jsx)(_.A,{variant:"h6",children:"Function Inputs"})}),J(l,o,s)]}),(0,U.jsx)(z,{transform:l})]})}):null]})})]})}function $(e){let{pipeline:a,transforms:t}=e;const s=M(),[l,n]=(0,i.useState)([]);return(0,i.useEffect)((()=>{n(t.find((e=>e.name===a.name))||{})}),[a,t]),(0,U.jsxs)(w.A,{className:"".concat(s.root,", ").concat(s.card),children:[(0,U.jsx)(S.A,{avatar:(0,U.jsx)(D.A,{"aria-label":a.type,className:s.avatar,children:Z(a.type)}),titleTypographyProps:{variant:"h4"},title:K(a.type)}),(0,U.jsx)(I.A,{children:(0,U.jsxs)(u.Ay,{container:!0,spacing:1,children:[(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Name:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.name})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Type:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.type})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Classifier:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.classifiers[0].name})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Optimizer:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.optimizers[0].name})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Validation:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.validation_methods[0].name})}),(0,U.jsx)(u.Ay,{item:!0,xs:1})]})}),(0,U.jsx)(z,{transform:l})]})}function q(e){let{pipeline:a,transforms:t}=e;const s=M(),[l,n]=(0,i.useState)(null);return(0,i.useEffect)((()=>{a&&t&&n(t.find((e=>e.name===a.name)))}),[a,t]),(0,U.jsxs)(w.A,{className:"".concat(s.root,", ").concat(s.card),children:[(0,U.jsx)(S.A,{avatar:(0,U.jsx)(D.A,{"aria-label":a.type,className:s.avatar,children:Z(a.type)}),titleTypographyProps:{variant:"h4"},title:K(a.type)}),(0,U.jsx)(I.A,{children:(0,U.jsxs)(u.Ay,{container:!0,spacing:1,children:[(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Name:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.name})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsx)(_.A,{className:s.title,children:"Type:"})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:s.pos,children:a.type})}),(0,U.jsx)(u.Ay,{item:!0,xs:1}),J(l,a.inputs,s)]})}),(0,U.jsx)(z,{transform:l})]})}const G={query:{label:"Input",styleName:"nodeColor1",Icon:()=>(0,U.jsx)(f.A,{}),getDetailView:(e,a,t,s)=>(0,U.jsx)(T,{pipeline:e,transforms:a,columns:t,cls:s})},file:{label:"Input",styleName:"nodeColor1",Icon:()=>(0,U.jsx)(f.A,{}),getDetailView:(e,a,t,s)=>(0,U.jsx)(T,{pipeline:e,transforms:a,columns:t,cls:s})},transform:{label:"Transform",styleName:"nodeColor2",Icon:()=>(0,U.jsx)(y.A,{}),getDetailView:(e,a,t,s)=>(0,U.jsx)(V,{pipeline:e,transforms:a,columns:t,cls:s})},generatorset:{label:"Feature Generators",styleName:"nodeColor3",Icon:()=>(0,U.jsx)(A.A,{}),getDetailView:(e,a,t,s)=>(0,U.jsx)(Y,{pipeline:e,transforms:a,columns:t,cls:s})},selectorset:{label:"Feature Selectors",styleName:"nodeColor4",Icon:()=>(0,U.jsx)(j.A,{}),getDetailView:(e,a,t,s)=>(0,U.jsx)(Y,{pipeline:e,transforms:a,columns:t,cls:s})},sampler:{label:"Sampler",styleName:"nodeColor5",Icon:()=>(0,U.jsx)(h.A,{}),getDetailView:(e,a,t,s)=>(0,U.jsx)(X,{pipeline:e,transforms:a,columns:t,cls:s})},tvo:{label:"Test Validate Optimize",styleName:"nodeColor6",Icon:()=>(0,U.jsx)(g.A,{}),getDetailView:(e,a,t,s)=>(0,U.jsx)($,{pipeline:e,transforms:a,columns:t,cls:s})},segmenter:{label:"Segmenter",styleName:"nodeColor7",Icon:()=>(0,U.jsx)(b.A,{}),getDetailView:(e,a,t,s)=>(0,U.jsx)(q,{pipeline:e,transforms:a,columns:t,cls:s})},default:{label:"",styleName:"nodeColor8",Icon:()=>(0,U.jsx)(v.A,{}),getDetailView:(e,a,t,s)=>(0,U.jsx)(T,{pipeline:e,transforms:a,columns:t,cls:s})}},Q=(e,a,t,s)=>(G[e.type.toLowerCase()]||G.default).getDetailView(e,a,t,s),K=e=>(G[e.toLowerCase()]||{label:e}).label,Z=e=>{const a=G[e.toLowerCase()]||G.default;return(0,U.jsx)(N.A,{title:""===a.label?e:a.label,children:a.Icon()})},J=(e,a,t)=>e&&e.input_contract||a?Object.entries(((e,a)=>{if(!e)return null;const t={};return e.forEach((e=>{t[e.name]=null!==a[e.name]?a[e.name]:e.default||""})),t})((e||{}).input_contract||[],a||{})).map((e=>{let[a,s]=e;return ee(a,s,t)})):null,ee=(e,a,t)=>{if("input_data"===e)return null;"number"===typeof a&&(a=a.toString());const s=Array.isArray(a)?a.join(", "):a;return E.A.isNullOrEmpty(s)?null:(0,U.jsxs)(i.Fragment,{children:[(0,U.jsx)(u.Ay,{item:!0,xs:3,children:(0,U.jsxs)(_.A,{className:t.title,children:[E.A.capitalizeWords(e.replace("_"," ")),":"]})}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:(0,U.jsx)(_.A,{className:t.pos,children:s})}),(0,U.jsx)(u.Ay,{item:!0,xs:1})]},e)},ae=(0,i.memo)((e=>{let{data:a}=e;const t=p(),s=(l=a.pipeline.type,t[(G[l.toLowerCase()]||G.default).styleName]);var l;return(0,U.jsx)(n.A,{boxShadow:a.shadow,p:2,borderRadius:"3%",className:s,width:a.width,children:(0,U.jsxs)(u.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",spacing:1,children:[(0,U.jsx)(u.Ay,{item:!0,xs:2,children:Z(a.pipeline.type)}),(0,U.jsx)(u.Ay,{item:!0,xs:10,children:(0,U.jsxs)(u.Ay,{container:!0,spacing:0,children:[(0,U.jsx)(u.Ay,{item:!0,xs:4,children:"Name:"}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:a.pipeline.name}),(0,U.jsx)(u.Ay,{item:!0,xs:4,children:"Type:"}),(0,U.jsx)(u.Ay,{item:!0,xs:8,children:a.pipeline.type})]})})]})})})),te={fontSize:"14px",fontFamily:"Roboto, Helvetica, Arial, sans-serif"},se={selectorNode:ae},le=e=>{let{pipelineSteps:a,transforms:t,sources:s}=e;const l=p(),[r,o]=(0,i.useState)([{name:""}]),[c,x]=(0,i.useState)(!1),[h,y]=(0,i.useState)([]),[f,A]=(0,i.useState)(null),[j,g]=(0,i.useState)({width:"100%",maxWidth:"600px",display:"flex",justifyContent:"flex-right",overflowy:"true",height:"10px"});(0,i.useEffect)((()=>{o(t)}),[t]),(0,i.useEffect)((()=>{if(!a)return;const e=[];let t=0,s=100+10*Math.max(...a.map((e=>e.name.length)));s>500&&(s=500),a.map(((a,s)=>{e.push({id:"".concat(s+1),data:{pipeline:a,width:350,shadow:2},position:{x:50,y:t},type:"selectorNode",style:te}),s>0&&e.push({id:"e".concat(s,"-").concat(s+1),source:"".concat(s),target:"".concat(s+1),arrowHeadType:"arrowclosed"}),t+=120})),x(!1),y(e),g((e=>({...e,height:"".concat(160*a.length,"px")})))}),[a]);return(0,U.jsx)(m.A,{children:(0,U.jsx)(n.A,{p:4,className:l.box,children:(0,U.jsxs)(u.Ay,{container:!0,spacing:1,children:[(0,U.jsx)(u.Ay,{item:!0,xs:6,className:l.flowWrapper,children:h?(0,U.jsx)(d.Ay,{style:j,onElementClick:(e,a)=>{A(a.data.pipeline),x(!0),y((e=>(e.map((e=>{"selectorNode"===e.type&&(e.data.pipeline.name===a.data.pipeline.name?e.data.shadow=20:e.data.shadow=2)})),e)))},elementsSelectable:!1,nodesDraggable:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!1,elements:h,onLoad:e=>e,nodeTypes:se,selectNodesOnDrag:!0}):null}),(0,U.jsx)(u.Ay,{item:!0,xs:6,children:c&&f?Q(f,r,s,l):null})]})})})};const ie=(0,s.Ng)((function(e,a){return{pipelineSteps:a.pipelineSteps,transforms:e.transforms.data,sources:e.sources.data}}),{})(le);var ne=t(5259),re=t(52437);const oe=e=>{let{model:a,showTitle:t}=e;const s={data:[],isFetching:a.isFetching},[l,n]=(0,i.useState)(s),r=e=>(0,U.jsx)(_.A,{variant:"button",children:e.title.toUpperCase()}),o=[{title:"Feature",field:"Feature",primary:!0,sortable:!0,type:re.$.Text,filterable:!0,renderLabel:r},{title:"Category",field:"Category",sortable:!0,type:re.$.Text,filterable:!0,renderLabel:r},{title:"Generator",field:"Generator",sortable:!0,type:re.$.Text,filterable:!0,renderLabel:r},{title:"Sensors",field:"Sensors",sortable:!0,type:re.$.Text,filterable:!0,renderLabel:r}];(0,i.useEffect)((()=>{a&&a.data&&a.data.feature_summary?n({data:a.data.feature_summary,isFetching:a.isFetching}):n(s)}),[a]);const c={rowsPerPage:8,showPagination:!0,noContentText:"No Feature Summary",excludePrimaryFromDetails:!0,applyFilters:!0,summary:a,isDarkHeader:!0};return(0,U.jsx)(ne.A,{tableId:"featureSummaryTable",tableColumns:o,tableData:l,tableTitle:t?"Feature Summary":null,tableOptions:c})};var ce=t(90537);const de=e=>{let{model:a}=e;const t=(0,i.useMemo)((()=>{var e,t,s,l;const i=null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.model_results)||void 0===t?void 0:t.training_metrics,n=null===i||void 0===i||null===(s=i.accuracy)||void 0===s?void 0:s.length,r=Array.from({length:n},((e,a)=>a)),o=null===i||void 0===i||null===(l=i.qat_accuracy)||void 0===l?void 0:l.length,c=Array.from({length:o},((e,a)=>a+n));let d=[],m=[];return null!==i&&void 0!==i&&i.accuracy&&(d=d.concat([{x:r,y:i.accuracy,name:"training accuracy",line:{dash:"solid",color:"#1f77b4"}},{x:r,y:i.val_accuracy,name:"validation accuracy",line:{dash:"solid",color:"#ff7f0e"}}]),m=m.concat([{x:r,y:i.loss,name:"training loss"},{x:r,y:i.val_loss,name:"validation loss"}])),null!==i&&void 0!==i&&i.qat_accuracy&&(d=d.concat([{x:c,y:i.qat_accuracy,name:"QAT training accuracy",mode:"lines+markers",line:{dash:"dot",color:"#1f77b4"},marker:{symbol:"circle-open",size:8}},{x:c,y:i.qat_val_accuracy,name:"QAT validation accuracy",mode:"lines+markers",line:{dash:"dot",color:"#ff7f0e"},marker:{symbol:"circle-open",size:8}}]),m=m.concat([{x:c,y:i.qat_loss,name:"QAT training loss",mode:"lines+markers",line:{dash:"dot",color:"#1f77b4"},marker:{symbol:"circle-open",size:8}},{x:c,y:i.qat_val_loss,name:"QAT validation loss",mode:"lines+markers",line:{dash:"dot",color:"#ff7f0e"},marker:{symbol:"circle-open",size:8}}])),{metrics:i,accuracy:d,loss:m}}),[a]);return(0,U.jsx)("div",{children:t.metrics.accuracy?(0,U.jsxs)("div",{style:{width:"100%",position:"relative"},children:[(0,U.jsx)(ce.A,{data:t.accuracy,style:{width:"100%",height:"100%"},layout:{title:"Accuracy",xaxis:{title:{text:"Epochs"}}}}),(0,U.jsx)(ce.A,{data:t.loss,style:{width:"100%",height:"100%"},layout:{title:"Loss",xaxis:{title:{text:"Epochs"}}}})]},"neuarl_network_plots"):null},"neural_network_summary")};var me=t(53536),ue=t.n(me);const xe=e=>{let{model:a}=e;const[t,s]=(0,i.useState)({data:null,isFetching:a.isFetching});(0,i.useEffect)((()=>{var e;if(!ue().isEmpty(null===(e=a.data)||void 0===e?void 0:e.neuron_array)){var t;const e=null===(t=a.data)||void 0===t?void 0:t.neuron_array.map((e=>({...e,category_name:a.data.class_map[e.Category],Vector:e.Vector.toString()})));s({data:e,isFetching:!1})}}),[a]);const l=[{title:"Category",field:"category_name",sortable:!0,type:re.$.Text,filterable:!0},{title:"Category ID",field:"Category",primary:!0,sortable:!0,type:re.$.Numeric,filterable:!0},{title:"AIF",field:"AIF",primary:!0,sortable:!0,type:re.$.Numeric,filterable:!0},{title:"Pattern",field:"Vector",sortable:!0,type:re.$.Text,filterable:!0}];return(0,U.jsx)(ne.A,{tableId:"modelParamterTable",tableColumns:l,tableData:t,tableTitle:!0,tableOptions:{rowsPerPage:20,showPagination:!0,applyFilters:!0,noContentText:"No Model Summary",excludePrimaryFromDetails:!0,isDarkHeader:!0}})},pe=e=>{var a,t,s,l;let{model:r,showTitle:o}=e;const c=e=>(0,U.jsx)(_.A,{variant:"button",children:e.title.toUpperCase()}),d={title:"classifier",field:"classifier",primary:!0,sortable:!0,type:re.$.Text,filterable:!0,renderLabel:c},[m,u]=(0,i.useState)({data:null,isFetching:r.isFetching}),[x,p]=(0,i.useState)({data:null,isFetching:r.isFetching}),[h,y]=(0,i.useState)(null);(0,i.useEffect)((()=>{r&&r.data&&(e=>{const a={},t=[];if(0!==Object.entries(e).length&&e.constructor===Object){var s,l,i,n,r,o;a.classifier=null===(s=e.device_configuration)||void 0===s?void 0:s.classifier,a.uuid=e.uuid;const t=(null===(l=e.pipeline_summary)||void 0===l?void 0:l.length)||0;var m;"PME"===(null===(i=e.device_configuration)||void 0===i?void 0:i.classifier)?(a.optimizer=e.pipeline_summary[t-1].optimizers[0].name,a.neurons=e.neuron_array.length,a.classification_mode=null!==e&&void 0!==e&&null!==(m=e.device_configuration)&&void 0!==m&&m.classification_mode?"KNN":"RBF",a.distance_mode=null!==e&&void 0!==e&&e.device_configuration.distance_mode?"LSUP":"L1"):"Decision Tree Ensemble"===(null===(n=e.device_configuration)||void 0===n?void 0:n.classifier)?(a.n_estimators=e.pipeline_summary[t-1].optimizers[0].inputs.n_estimators,a.max_depth=e.pipeline_summary[t-1].optimizers[0].inputs.max_depth):"Boosted Tree Ensemble"===(null===(r=e.device_configuration)||void 0===r?void 0:r.classifier)||null===(o=e.device_configuration)||void 0===o||o.classifier}if(t.splice(0,t.length),0!==Object.entries(a).length&&a.constructor===Object){t.push(d);for(const e in a)"classifier"!==e&&t.push({title:e,field:e,sortable:!0,type:re.$.Text,filterable:!0,renderLabel:c})}u({data:[a],isFetching:!1}),p({data:e,isFetching:!1}),y(t)})(r.data||{})}),[r]);return(0,U.jsxs)(n.A,{children:[(0,U.jsx)(ne.A,{tableId:"modelSummaryTable",tableColumns:h,tableData:m,tableTitle:o?"Model Summary":null,tableOptions:{rowsPerPage:20,showPagination:!0,applyFilters:!0,noContentText:"No Model Summary",excludePrimaryFromDetails:!0,isDarkHeader:!0}}),"PME"===(null===r||void 0===r||null===(a=r.data)||void 0===a||null===(t=a.device_configuration)||void 0===t?void 0:t.classifier)&&x?(0,U.jsx)(xe,{model:x}):null,"TensorFlow Lite for Microcontrollers"===(null===r||void 0===r||null===(s=r.data)||void 0===s||null===(l=s.device_configuration)||void 0===l?void 0:l.classifier)?(0,U.jsx)(de,{model:r}):null]})};var he=t(29765),ye=t(98992),fe=t(80923),Ae=t(7996),je=t(67500),ge=t(52178);var ve=t(12826);const be=e=>{var a,t;if(ue().isEmpty(null===(a=e.segments)||void 0===a||null===(t=a.segments)||void 0===t?void 0:t.data))return[];const s=(0,ve.jC)()(e);return e.segments.segments.data.map(((e,a)=>{const t=s[e.label_value];return{sequence:a+1,...e,...t}}))};var Ne=t(91688),_e=t(88911),Ee=t(79190),we=t(55365),Se=t(33206);const De={mode:"markers",name:"scatter",type:"scatter",x:[],y:[],marker:{size:12,line:{width:1,color:"#6c6d6c"},opacity:.8},autorange:!0,showlegend:!1},Ie={name:"histogram",type:"histogram",xaxis:"x2",yaxis:"y2",width:[.4],opacity:.8,showlegend:!1,autorange:!0,marker:{size:12,opacity:.8,line:{color:"#6c6d6c",width:.5,opacity:.5}}},Fe={arrowhead:6,ax:0,ay:0,bgcolor:"rgba(255, 255, 255, 0.9)",font:{size:12},borderwidth:3,borderpad:5,text:"",opacity:.4},Ce={arrowhead:6,ax:0,ay:0,bgcolor:"rgba(255, 255, 255, 0.9)",font:{size:18},borderwidth:3,borderpad:5,text:"Loading Data ..."},Me=700,Ue=e=>{let{featureData:a,colorHashMap:t,labelColumn:s,featureX:l,featureY:r,featureZ:o,parentRef:c,selectedClasses:d,title:m,selectedSegmentIndex:u,isFetching:x,fetchingText:p,onSelectPoint:h,isAutoRangeXaxis:y=!1}=e;const[f,A]=(0,i.useState)({}),[j,g]=(0,i.useState)({width:Me,height:Me}),[v,b]=(0,i.useState)([-10,265]),[N,_]=(0,i.useState)([]);(0,Se.G4)((()=>{null!==c&&void 0!==c&&c.current&&.9*c.current.offsetWidth<Me?g({width:.9*c.current.offsetWidth,height:.9*c.current.offsetWidth}):g({width:Me,height:Me})}));const E=(0,i.useMemo)((()=>ue().isEmpty(a[s])?[]:a[s].reduce(((e,a,t)=>(d&&!d.includes(a)||(e[a]||(e[a]=[]),e[a].push(t)),e)),{})),[a,d]);(0,i.useEffect)((()=>{const e=[],s=[],i=[];ue().entries(E).forEach((n=>{let[c,d]=n;const[m,u,x]=[l,r,o].map((e=>{if(a[e]){return a[e].filter(((e,a)=>d.includes(a)))}return[]}));y&&[m,u,x].forEach((e=>{ue().isEmpty(e)||(s.push(ue().max(e)),i.push(ue().min(e)))})),e.push({...De,name:c,ids:d,x:m,y:u,z:x,hovertext:"Click to show related segment",marker:{...De.marker,color:t[c]},mode:"markers",type:"scatter2d"}),e.push({...Ie,xaxis:null,name:c,x:m,marker:{...Ie.marker,color:t[c]},showlegend:!0}),e.push({...Ie,yaxis:null,name:c,y:u,marker:{...Ie.marker,color:t[c]},showlegend:!1})})),y&&b([ue().round(ue().min(i),0),ue().round(ue().max(s),0)]),_(e)}),[E,l,r,o,t]);return(0,i.useEffect)((()=>{if(!ue().isEmpty(a.segment_uuid)&&l&&r){const e={...Fe,x:a[l][u],y:a[r][u],bordercolor:t[a[s][u]]};A((a=>({...a,annotations:[e]})))}}),[u]),(0,i.useEffect)((()=>{A((e=>({...e,annotations:[]})))}),[l,r]),(0,i.useEffect)((()=>{if(x){const e={...Ce,text:p||Ce.text};A((a=>({...a,annotations:[e]})))}else A((e=>({...e,annotations:[]})))}),[x]),(0,U.jsx)(n.A,{mt:2,style:j,margin:"auto",children:(0,U.jsx)(we.bO,{data:N,layout:f,title:m,onClick:e=>{const t=null===e||void 0===e?void 0:e.points[0];if(a.segment_uuid&&t.data.ids){h(t.data.ids[t.pointIndex]);const e={...Fe,x:t.xaxis.d2l(t.x),y:t.yaxis.d2l(t.y),bordercolor:t.fullData.marker.color};A((a=>({...a,annotations:[e]})))}},$xaxis:{title:{text:l,standoff:20},range:v},$yaxis:{title:{text:r,standoff:15},range:v}})})};var Te=t(7426),Le=t(14381),Pe=t(34815);const Oe=e=>{let{featureData:a,labelColumn:t,labelValues:s,colorHashMap:l,selectedSegmentIndex:r,selectionField:o,isFetching:c=!1,onSelectSegmemts:d,onSelectSegmemtIndex:m}=e;const{t:u}=(0,Te.B)("components"),x=(0,i.useMemo)((()=>!ue().isEmpty(null===a||void 0===a?void 0:a.segment_uuid)&&t?a.segment_uuid.map(((e,s)=>{const i=a[t]?a[t][s]:"";return{uuid:e,id:s+1,name:i,color:l[i]}})):[]),[a,t]),p=(0,i.useMemo)((()=>({data:x.map((e=>e)),isFetching:c})),[x]),h=[{title:u("label-table.header-id"),field:"id",sortable:!0,type:re.$.Numeric},{title:u("label-table.header-name"),field:"name",sortable:!0,type:re.$.Text,filterable:!0,formType:ue().isEmpty(s)?Pe.XF.FORM_STRING_TYPE:Pe.XF.FORM_SELECT_TYPE,lookup:ue().isEmpty(s)?[]:s.reduce(((e,a)=>(e[a]=a,e)),{}),render:(e,a)=>(0,U.jsx)(n.A,{p:1.75,children:(0,U.jsx)(Le.A,{name:(null===a||void 0===a?void 0:a.name)||"",color:(null===a||void 0===a?void 0:a.color)||""})})},{title:"UUID",field:"uuid",sortable:!0,type:re.$.Text,filterable:!1}],y={rowsPerPage:10,rowsPerPageOptions:[10,25,50,100,"All"],excludePrimaryFromDetails:!0,showPagination:!0,applyFilters:!0,isDarkHeader:!0,selectionField:o,selectionFieldIsSortable:!1,onSelectInTable:e=>{d&&d(e)},isDisabledSelectAll:!0,isShowSelection:!0,selectedRowId:r+1,onRowSelection:(e,a)=>(e=>{m(e.id-1)})(a),noContentText:u("captures-table.empty-content")};return(0,U.jsx)(ne.A,{tableId:"lableTable",tableData:p,tableColumns:h,tableOptions:y})};var ke=t(76174),Re=t(93531);const ze=e=>{let{data:a,title:t,height:s,hideX:l,$xaxis:n,$yaxis:r,layout:o}=e;const[c,d]=(0,i.useState)(0);return(0,i.useEffect)((()=>{d(c+1)}),[a,o]),(0,U.jsx)(ce.A,{data:a,config:Re.jQ,useResizeHandler:!0,style:{width:"100%",height:"100%"},onHover:()=>{document.getElementsByClassName("nsewdrag")[0].style.cursor="pointer"},layout:{...ke.x2,...s&&{height:s},xaxis:{...ke.x2.xaxis,...n,...l&&{visible:l}},yaxis:{...ke.x2.yaxis,...r},...l&&{margin:{...ke.x2.margin,b:0}},title:{text:t,font:{size:16,weight:"bold",fontFamily:["Open Sans","verdana","arial","sans-serif"]},xref:"paper"},...o},revision:c})},Ve=e=>{let{featureVectorData:a,modelData:t,selectedSegmentIDs:s,labelColumn:l}=e;const r=(0,i.useCallback)((()=>{const e=[],i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return 1===e?100:10*e+50};if(!ue().isEmpty(null===t||void 0===t?void 0:t.feature_summary)&&!ue().isEmpty(a)){const n=null===t||void 0===t?void 0:t.feature_summary.reduce(((e,a)=>{let{Feature:t}=a;const s=t.includes("gen_c")?t.substr(4,5):"",l=t.includes("gen_c")?t.substr(10):t;return ue().isUndefined(e[s])&&(e[s]=[]),e[s].push(l),e}),{});s.forEach(((t,r)=>{const o=[],c=[];let d=[];const m=t-1;ue().entries(n).forEach(((e,t)=>{let[s,l]=e;0===t&&(d=l.map((e=>e.replaceAll("gen","")))),o.push(s);const i=l.map((e=>{const t=s?"gen_".concat(s,"_").concat(e):e;return a[t][m]||0}));c.push(i)})),e.push({x:d,y:o,z:c,title:"".concat(a[l][m]," ID(").concat(t,")"),colorscale:[[0,"#2dc937"],[.3,"#99c140"],[.5,"#e7b416"],[.7,"#db7b2b"],[1,"#cc3232"]],height:i(o.length),ygap:.1,xgap:.1,type:"heatmap",showscale:!1,isLast:r===s.length-1})}))}return e}),[t,a,s]);return(0,U.jsx)(n.A,{width:"100%",children:r().map((e=>(0,U.jsx)(ze,{data:[e],title:e.title||"",height:e.isLast?e.height+200:e.height,hideX:!e.isLast},e.title)))})};var Xe=t(5766);const We=()=>(0,x.A)((()=>({featureItemPaper:{display:"block",gridColumn:"span 6",padding:"1rem",marginTop:"1rem","@media (max-width: 1100px)":{gridColumn:"span 12"}}})))(),He=e=>{let{modelData:a,selectLabelColorHashMap:t,selectLabelValuesByName:s,featureVectorData:l,featureFileUUID:o,labelValuesHashMap:c,loadFeatureVectorData:d,isFetchingFeatureVectorData:m}=e;const u=We(),{projectUUID:x}=(0,Ne.useParams)(),[p,h]=(0,i.useState)([]),[y,f]=(0,i.useState)([]),[A,j]=(0,i.useState)([]),[g,v]=(0,i.useState)(""),[b,N]=(0,i.useState)({}),[_,E]=(0,i.useState)([]),[w,S]=(0,i.useState)(-1),[D,I]=(0,i.useState)(""),[F,C]=(0,i.useState)(""),[M,T]=(0,i.useState)(""),L=(0,i.useRef)(null),P=(0,i.useCallback)((()=>ue().isEmpty(a)?[]:a),[a]),O=(0,i.useCallback)((()=>ue().isEmpty(l)?[]:l),[l]),k=e=>{S(e)};(0,i.useEffect)((()=>{if(!ue().isEmpty(null===a||void 0===a?void 0:a.feature_summary)){var e,s;o!==a.feature_file_uuid&&d(x,a.feature_file_uuid);const l=null===a||void 0===a?void 0:a.feature_summary.map((e=>e.Feature));I(l[0]),C(l[1]),T(l[2]),v((null===a||void 0===a||null===(e=a.query_summary)||void 0===e?void 0:e.label_column)||"Label"),N(t((null===a||void 0===a||null===(s=a.query_summary)||void 0===s?void 0:s.label_column)||"Label")),j(l),h(ue().values(a.class_map).map((e=>({name:e,value:e})))),f(ue().values(a.class_map))}}),[a]);const R=(0,i.useMemo)((()=>{var e;return g?s((null===a||void 0===a||null===(e=a.query_summary)||void 0===e?void 0:e.label_column)||"Label"):[]}),[g,a]);return(0,U.jsxs)(n.A,{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gridAutoRows:"max-content",gap:2,children:[(0,U.jsxs)(r.A,{className:u.featureItemPaper,elevation:0,ref:L,children:[(0,U.jsxs)(_e.A,{direction:"column",p:1,children:[(0,U.jsx)(_e.A,{mb:2,children:(0,U.jsx)(Xe.A,{id:"classMap",labelId:"classMapLabel",name:"classMap",label:"Classes",size:"small",isUpdateWithDefault:!1,isObserveDefaultValue:!0,defaultValue:y||[],options:p,onChange:(e,a)=>{f(a)},disabledOptions:["segment_uuid"]})}),(0,U.jsxs)(_e.A,{direction:"row",spacing:1,children:[(0,U.jsxs)(W.A,{size:"small",fullWidth:!0,children:[(0,U.jsx)(Ee.A,{id:"featureXLabel",children:"featureX"}),(0,U.jsx)(H.A,{labelId:"featureXLabel",id:"featureXSelect",label:"featureX",name:"featureX",value:D,onChange:e=>{let{target:a}=e;null!==a&&void 0!==a&&a.value&&I(a.value)},displayEmpty:!0,children:A.map((e=>(0,U.jsx)(B.A,{value:e,children:e},"featureX_".concat(e))))})]}),(0,U.jsxs)(W.A,{size:"small",fullWidth:!0,children:[(0,U.jsx)(Ee.A,{id:"featureYLabel",children:"featureY"}),(0,U.jsx)(H.A,{labelId:"featureYLabel",id:"featureYSelect",label:"featureY",name:"featureY",value:F,onChange:e=>{let{target:a}=e;null!==a&&void 0!==a&&a.value&&C(a.value)},children:A.map((e=>(0,U.jsx)(B.A,{value:e,children:e},"featureY_".concat(e))))})]})]})]}),(0,U.jsx)(Ue,{featureData:O(),featureNames:A,labelColumn:g,featureX:D,featureY:F,featureZ:M,parentRef:L,colorHashMap:b,selectedClasses:y,selectedSegmentIndex:w,title:"<b>Feature Vector Plot</b>",isFetching:m,onSelectPoint:k},"key-feature-vector-chart")]}),(0,U.jsx)(r.A,{className:u.featureItemPaper,elevation:0,children:(0,U.jsx)(Oe,{featureData:l,labelColumn:g,labelValues:R,colorHashMap:b,selectedSegmentIndex:w,selectionField:"id",onSelectSegmemts:e=>{E(e)},onSelectSegmemtIndex:k})}),(0,U.jsx)(n.A,{gridColumn:"span 12",children:(0,U.jsx)(Ve,{featureVectorData:O(),modelData:P(),labelColumn:g,selectedSegmentIDs:_,labelHashMap:c})})]})},Be={loadFeatureVectorData:l.Cn,loadSegments:e=>async a=>{try{const{data:t}=await Ae.Ay.get("/project/".concat(e,"/label-relationship/"));a({type:ge.j,payload:t})}catch(t){je.A.logError("","".concat(E.A.getResponseErrorDetails(t)," \n--projectUUID:").concat(e),t,"loadFeatureVectorData"),(0,Ae.M3)(t,"Failed to loadSegments projectUUID: ".concat(e))}}},Ye=(0,s.Ng)((e=>{var a,t,s,l;return{modelData:null===(a=e.models.modelData)||void 0===a?void 0:a.data,featureVectorData:null===(t=e.models.featureVectors)||void 0===t?void 0:t.data,featureFileUUID:null===(s=e.models.featureVectors)||void 0===s?void 0:s.featureFileUUID,isFetchingFeatureVectorData:null===(l=e.models.featureVectors)||void 0===l?void 0:l.isFetching,segments:be(e),labelValuesHashMap:(0,ve.jC)()(e),selectLabelColorHashMap:a=>(0,ve.bi)(a)(e),selectLabelValuesByName:a=>(0,ve.Vi)(a)(e)}}),Be)(He),$e="FEATURE_ANALYSIS_LIST_LOADING";var qe=t(81673),Ge=t(69322);const Qe=["UMAP","PCA","TSNE"],Ke=e=>{let{modelData:a,selectLabelColorHashMap:t,selectLabelValuesByName:s,loadFeatureAnalysisList:l,loadFeatureAnalysisData:o,generateFeatureAnalysis:c}=e;const d=We(),{projectUUID:m}=(0,Ne.useParams)(),[u,x]=(0,i.useState)([]),[p,h]=(0,i.useState)(""),[y,f]=(0,i.useState)({}),[A,j]=(0,i.useState)(Qe[0]),[g,v]=(0,i.useState)(-1),[b,N]=(0,i.useState)(!1),[_,E]=(0,i.useState)({}),[w,S]=(0,i.useState)({}),[D,I]=(0,i.useState)(""),F=(0,i.useRef)(null),C=e=>{v(e)},M=async e=>{let{target:t}=e;if(D&&I(""),null!==t&&void 0!==t&&t.value){E({}),N(!0),j(t.value);let e="";if(w[t.value])e=w[t.value];else try{e=await(async e=>{const{uuid:t,analysis_type:s}=await c(m,a.feature_file_uuid,{analysis_type:e});return S((e=>{const a={...e};return a[s]=t,a})),t})(t.value)}catch(s){I(s.message)}if(e){const a=await o(m,e);E(a)}N(!1)}},T=(0,i.useCallback)((()=>[0,1].map((e=>"".concat(A,"_").concat(e)))),[_]);(0,i.useEffect)((()=>{var e,s;ue().isEmpty(a)||((async()=>{N(!0);const e=await l(m,a.feature_file_uuid);if(ue().isEmpty(e))await M({target:{value:A}});else{const a=e.reduce(((e,a)=>(e[a.analysis_type]=a.uuid,e)));let t="";if(a[A])t=a[A];else{const a=ue().last(e);t=a.uuid,j(a.analysis_type)}const s=await o(m,t);E(s),S(a)}N(!1)})(),h((null===a||void 0===a||null===(e=a.query_summary)||void 0===e?void 0:e.label_column)||"Label"),f(t((null===a||void 0===a||null===(s=a.query_summary)||void 0===s?void 0:s.label_column)||"Label")),x(ue().values(a.class_map).map((e=>({name:e,value:e})))))}),[a]);const L=(0,i.useMemo)((()=>{var e;return p?s((null===a||void 0===a||null===(e=a.query_summary)||void 0===e?void 0:e.label_column)||"Label"):[]}),[p,a]);return(0,U.jsxs)(n.A,{display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gridAutoRows:"max-content",gap:2,children:[(0,U.jsx)(r.A,{className:d.featureItemPaper,elevation:0,children:(0,U.jsxs)(n.A,{ref:F,children:[(0,U.jsx)(_e.A,{direction:"column",p:2,children:(0,U.jsx)(_e.A,{direction:"row",spacing:1,children:(0,U.jsxs)(W.A,{size:"small",fullWidth:!0,helperText:D,error:Boolean(D),children:[(0,U.jsx)(Ee.A,{id:"analysisTypeLabelId",children:"Analysis Type"}),(0,U.jsx)(H.A,{labelId:"analysisTypeLabelId",id:"analysisTypeId",label:"Analysis Type",name:"analysisTypeId",value:A,onChange:M,disabled:b,displayEmpty:!0,children:Qe.map((e=>(0,U.jsx)(B.A,{value:e,children:(0,U.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[e," ",b&&A===e?(0,U.jsx)(Ge.A,{style:{marginLeft:"0.25rem"},size:"small",color:"primary"}):null]})},"analysis_type".concat(e))))}),(0,U.jsx)(qe.A,{children:D})]})})}),(0,U.jsx)(Ue,{featureData:_,featureNames:T(),colorHashMap:y,labelColumn:p,featureX:"".concat(A,"_0"),featureY:"".concat(A,"_1"),parentRef:F,selectedSegmentIndex:g,title:"<b>Feature Analysis</b>",isFetching:b,fetchingText:"Generating Embeddings ...",onSelectPoint:C,selectedClasses:u.map((e=>e.value)),isAutoRangeXaxis:!0},"key-feature-embeding")]})}),(0,U.jsx)(r.A,{className:d.featureItemPaper,elevation:0,children:(0,U.jsx)(Oe,{featureData:_,labelColumn:p,labelValues:L,colorHashMap:y,selectedSegmentIndex:g,onSelectSegmemtIndex:C})})]})},Ze={loadFeatureAnalysisList:(e,a)=>async t=>{try{t({type:$e});const{data:s}=await Ae.Ay.get("/project/".concat(e,"/featurefile-analysis/").concat(a,"/"));return s}catch(s){je.A.logError("","".concat(E.A.getResponseErrorDetails(s)," \n--projectUUID:").concat(e,"\n--featureFileUUID:").concat(a),s,"loadFeatureVectorData"),(0,Ae.M3)(s,"Failed to loadFeatureAlalisies modelUUID: ".concat(a))}return[]},loadFeatureAnalysisData:(e,a)=>async t=>{try{t({type:$e});const{data:s}=await Ae.Ay.get("/project/".concat(e,"/featurefile/").concat(a,"/json/"));return s}catch(s){je.A.logError("","".concat(E.A.getResponseErrorDetails(s)," \n--projectUUID:").concat(e,"\n--featureFileUUID:").concat(a),s,"loadFeatureVectorData"),(0,Ae.M3)(s,"Failed to loadFeatureAlalisies featureFileUUID: ".concat(a))}return{}},generateFeatureAnalysis:(e,a,t)=>async s=>{try{s({type:$e});const{data:l}=await Ae.Ay.post("/project/".concat(e,"/featurefile-analysis/").concat(a,"/"),t,{headers:{...Ae.Ay.headers},"X-HTTP-Method-Override":"POST"});return l}catch(l){je.A.logError("","".concat(E.A.getResponseErrorDetails(l)," \n--projectUUID:").concat(e,"\n--modelUUID:").concat(a),l,"loadFeatureVectorData"),(0,Ae.M3)(l,"Failed to generateFeatureAnalysis modelUUID: ".concat(a))}return[]}},Je=(0,s.Ng)((e=>{var a;return{modelData:null===(a=e.models.modelData)||void 0===a?void 0:a.data,segments:be(e),labelColorHashMap:(0,ve.bi)("Label")(e),selectLabelColorHashMap:a=>(0,ve.bi)(a)(e),selectLabelValuesByName:a=>(0,ve.Vi)(a)(e)}}),Ze)(Ke);var ea=t(60137);const aa=e=>{let{model:a,showTitle:t}=e;const[s,l]=(0,i.useState)({data:null,isFetching:a.isFetching}),[r,o]=(0,i.useState)({data:null,isFetching:a.isFetching}),[c,d]=(0,i.useState)({data:null,isFetching:a.isFetching});return(0,i.useEffect)((()=>{var e,t,s,i,n,r,c,m,u,x,p,h,y,f;a.isFetching||(l({data:null===a||void 0===a||null===(e=a.data)||void 0===e||null===(t=e.model_results)||void 0===t||null===(s=t.metrics)||void 0===s||null===(i=s.validation)||void 0===i?void 0:i.ConfusionMatrix,isFetching:!1}),o({data:null===a||void 0===a||null===(n=a.data)||void 0===n||null===(r=n.model_results)||void 0===r||null===(c=r.metrics)||void 0===c||null===(m=c.train)||void 0===m?void 0:m.ConfusionMatrix,isFetching:!1}),null!==a&&void 0!==a&&null!==(u=a.data)&&void 0!==u&&null!==(x=u.model_results)&&void 0!==x&&null!==(p=x.metrics)&&void 0!==p&&p.AllConfusionMatrix&&d({data:null===a||void 0===a||null===(h=a.data)||void 0===h||null===(y=h.model_results)||void 0===y||null===(f=y.metrics)||void 0===f?void 0:f.AllConfusionMatrix,isFetching:!1}))}),[a]),(0,U.jsxs)(n.A,{children:[(0,U.jsxs)(n.A,{sx:{flexWrap:"wrap",display:"flex"},children:[ue().isNil(s&&s.data)?(0,U.jsx)(U.Fragment,{}):(0,U.jsx)(ea.A,{model:s,showTitle:!0,modelName:"Validation"}),ue().isNil(r&&r.data)?(0,U.jsx)(U.Fragment,{}):(0,U.jsx)(ea.A,{model:r,showTitle:!0,modelName:"Training"})]}),null!==c.data?Object.entries(c.data).map(((e,a)=>{let[t,s]=e;return(0,U.jsxs)(n.A,{sx:{flexWrap:"wrap",display:"flex"},children:[(0,U.jsx)(ea.A,{model:{data:s.validation,isFetching:!1},showTitle:!0,modelName:t,fileName:"validation"}),(0,U.jsx)(ea.A,{model:{data:s.train,isFetching:!1},showTitle:!0,modelName:t,fileName:"train"})]},t)})):null]})};var ta=t(62582),sa=t(97111),la=t(81131);function ia(e){return{id:"full-width-tab-".concat(e),"aria-controls":"full-width-tabpanel-".concat(e)}}const na=e=>{let{model:a}=e;const t=We(),{projectUUID:s,modelUUID:l}=(0,Ne.useParams)(),[d,m]=(0,i.useState)(!1),[u,x]=(0,i.useState)(a),[p,h]=i.useState(0);return(0,i.useEffect)((()=>{x(a),a&&m(a.isFetching)}),[a]),(0,i.useEffect)((()=>{window.scrollTo(0,0)}),[]),(0,U.jsxs)(n.A,{className:t.box,children:[(0,U.jsx)(n.A,{mb:2,children:(0,U.jsx)(fe.A,{modelData:(null===u||void 0===u?void 0:u.data)||{}})}),(0,U.jsx)(r.A,{elevation:0,children:(0,U.jsxs)(o.A,{value:p,onChange:(e,a)=>{h(a)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto",children:[(0,U.jsx)(c.A,{label:"Confusion Matrix",component:ta.N_,to:{pathname:(0,Ne.generatePath)(sa.bw.MAIN.MODEL_EXPLORE.child.CONFUSION_MATRIX.path,{projectUUID:s,modelUUID:l})},...ia(0)}),(0,U.jsx)(c.A,{label:"Feature Visualization",component:ta.N_,to:{pathname:(0,Ne.generatePath)(sa.bw.MAIN.MODEL_EXPLORE.child.FEATURE_VISUALIZATION.path,{projectUUID:s,modelUUID:l})},...ia(1)}),(0,U.jsx)(c.A,{label:"Feature Embedding",component:ta.N_,to:{pathname:(0,Ne.generatePath)(sa.bw.MAIN.MODEL_EXPLORE.child.FEATURE_EMBEDDING.path,{projectUUID:s,modelUUID:l})},...ia(1)}),(0,U.jsx)(c.A,{label:"Feature Summary",component:ta.N_,to:{pathname:(0,Ne.generatePath)(sa.bw.MAIN.MODEL_EXPLORE.child.FEATURE_SUMMARY.path,{projectUUID:s,modelUUID:l})},...ia(1)}),(0,U.jsx)(c.A,{label:"Model Summary",component:ta.N_,to:{pathname:(0,Ne.generatePath)(sa.bw.MAIN.MODEL_EXPLORE.child.MODEL_SUMMARY.path,{projectUUID:s,modelUUID:l})},...ia(1)}),(0,U.jsx)(c.A,{label:"Pipeline Summary",component:ta.N_,to:{pathname:(0,Ne.generatePath)(sa.bw.MAIN.MODEL_EXPLORE.child.PIPELINE_SUMMARY.path,{projectUUID:s,modelUUID:l})},...ia(1)}),(0,U.jsx)(c.A,{label:"Knowledge Pack Summary",component:ta.N_,to:{pathname:(0,Ne.generatePath)(sa.bw.MAIN.MODEL_EXPLORE.child.KNOWLEDGE_PACK_SUMMARY.path,{projectUUID:s,modelUUID:l})},...ia(1)})]})}),(0,U.jsxs)(Ne.Switch,{children:[(0,U.jsx)(Ne.Route,{path:sa.bw.MAIN.MODEL_EXPLORE.child.CONFUSION_MATRIX.path,children:(0,U.jsx)(he.A,{value:p,index:0,children:(0,U.jsx)(aa,{model:u})})}),(0,U.jsx)(Ne.Route,{path:sa.bw.MAIN.MODEL_EXPLORE.child.FEATURE_VISUALIZATION.path,children:(0,U.jsx)(Ye,{})}),(0,U.jsx)(Ne.Route,{path:sa.bw.MAIN.MODEL_EXPLORE.child.FEATURE_EMBEDDING.path,children:(0,U.jsx)(Je,{})}),(0,U.jsx)(Ne.Route,{path:sa.bw.MAIN.MODEL_EXPLORE.child.FEATURE_SUMMARY.path,children:(0,U.jsx)(he.A,{value:p,index:3,children:3===p?(0,U.jsx)(oe,{model:u}):null})}),(0,U.jsx)(Ne.Route,{path:sa.bw.MAIN.MODEL_EXPLORE.child.MODEL_SUMMARY.path,children:(0,U.jsx)(he.A,{value:p,index:4,children:(0,U.jsx)(pe,{model:u})})}),(0,U.jsx)(Ne.Route,{path:sa.bw.MAIN.MODEL_EXPLORE.child.PIPELINE_SUMMARY.path,children:(0,U.jsx)(he.A,{value:p,index:5,children:u.data.pipeline_summary?(0,U.jsx)(ie,{pipelineSteps:u.data.pipeline_summary}):(0,U.jsx)(n.A,{p:1,className:t.box,children:(0,U.jsx)(ye.A,{text:"You may not have built the model yet. There is no Pipeline Summary to display."})})})}),(0,U.jsx)(Ne.Route,{path:sa.bw.MAIN.MODEL_EXPLORE.child.KNOWLEDGE_PACK_SUMMARY.path,children:(0,U.jsx)(he.A,{value:p,index:6,children:u.data.knowledgepack_summary?(0,U.jsx)(ie,{pipelineSteps:u.data.knowledgepack_summary.recognition_pipeline}):(0,U.jsx)(n.A,{m:"auto",p:1,className:t.box,children:(0,U.jsx)(ye.A,{text:"You may not have built the model yet. There is no Knowledge Pack Summary to display."})})})}),(0,U.jsx)(Ne.Route,{children:l?(0,U.jsx)(Ne.Redirect,{from:sa.bw.MAIN.MODEL_EXPLORE.path,to:{pathname:(0,Ne.generatePath)(sa.bw.MAIN.MODEL_EXPLORE.child.CONFUSION_MATRIX.path,{projectUUID:s,modelUUID:l})}}):null})]}),(0,U.jsx)(la.HE,{isOpen:d})]})},ra={loadModel:l.cm},oa=(0,s.Ng)((e=>({selectedProject:e.projects.selectedProject.uuid,selectedPipeline:e.pipelines.selectedPipeline,selectedProjectName:e.projects.selectedProject.name,classifierRun:e.classifiers.classifierRun,classifierCache:e.classifiers.classifierCache,selectedModel:e.models.selectedModel,model:e.models.modelData})),ra)(na)}}]);
//# sourceMappingURL=293.96152cdd.chunk.js.map