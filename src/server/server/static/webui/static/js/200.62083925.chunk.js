/*
Copyright 2017-2024 SensiML Corporation

This file is part of SensiML™ Piccolo AI™.

SensiML Piccolo AI is free software: you can redistribute it and/or
modify it under the terms of the GNU Affero General Public License
as published by the Free Software Foundation, either version 3 of
the License, or (at your option) any later version.

SensiML Piccolo AI is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public
License along with SensiML Piccolo AI. If not, see <https://www.gnu.org/licenses/>.
*/

(self.webpackChunksensiml_web=self.webpackChunksensiml_web||[]).push([[200],{18545:(e,l,a)=>{"use strict";a.d(l,{A:()=>A});var t=a(65043),i=a(53536),s=a.n(i),n=a(17392),r=a(22505),d=a(7478),u=a(96446),c=a(53193),o=a(79190),p=a(72221),m=a(32143),h=a(11906),v=a(71612),x=a(70579);const f=e=>{let{name:l,label:a,variant:i,options:f,defaultValue:A,id:j,labelId:b,addBtnText:y,onChange:g,onClickAdd:C,isCleared:I,fullWidth:F,isUpdateWithDefault:L=!0,isObserveDefaultValue:W=!1,disabled:D,...E}=e;const S=(0,d.A)((()=>({selectRoot:{width:"100%",display:"inline-grid"},selectWrapper:{display:"inline-grid",gridTemplateColumns:"auto 3rem",alignItems:"center"},addBtn:{display:"flex",justifyContent:"flex-start",paddingLeft:"1rem"}})))(),[w,V]=(0,t.useState)(""),N=()=>{s().isUndefined(A)||(V(A),L&&g(l,A))};(0,t.useEffect)((()=>{W||N()}),[]),(0,t.useEffect)((()=>{W&&N()}),[A]);return(0,x.jsx)(x.Fragment,{children:void 0!==w?(0,x.jsxs)(u.A,{className:"".concat(S.selectRoot," ").concat(I&&S.selectWrapper),children:[(0,x.jsxs)(c.A,{fullWidth:F,variant:i,children:[a?(0,x.jsx)(o.A,{id:b,children:a}):null,(0,x.jsxs)(p.A,{...E,labelId:b,id:j,value:w||"",onChange:e=>{var a,t;if((null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)===w)V(""),g(l,null);else if(null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.value){var i,s;V(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value),g(l,null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value)}},name:l,label:a,disabled:D,children:[null!==f&&void 0!==f&&f.length?f.map(((e,l)=>(0,x.jsx)(m.A,{id:"".concat(j,"_").concat(l),value:e.value,children:e.name},"".concat(j,"_").concat(l,"_").concat(e.value)))):(0,x.jsx)(x.Fragment,{}),C?(0,x.jsx)(h.A,{className:S.addBtn,color:"primary",fullWidth:!0,startIcon:(0,x.jsx)(r.A,{}),onClick:()=>{C&&C()},children:y}):null]})]}),I?(0,x.jsx)(n.A,{onClick:()=>{V(""),g(l,null)},"aria-label":"delete",size:"large",children:(0,x.jsx)(v.A,{})}):null]}):null})};f.defaultProps={isCleared:!1,fullWidth:!0};const A=f},5766:(e,l,a)=>{"use strict";a.d(l,{A:()=>A});var t=a(65043),i=a(53536),s=a.n(i),n=a(7478),r=a(72584),d=a(53193),u=a(79190),c=a(72221),o=a(74050),p=a(96446),m=a(43845),h=a(32143),v=a(48734),x=a(70579);const f=(0,n.A)((e=>({chips:{display:"flex",flexWrap:"wrap",gap:e.spacing(.25)},chip:{margin:e.spacing(.5)}}))),A=e=>{let{defaultValue:l,name:a,label:i,id:n,labelId:A,size:j,options:b,onChange:y,disabledOptions:g=[],fullWidth:C=!0,isUpdateWithDefault:I=!0,isObserveDefaultValue:F=!1,isFormHidden:L,defaultStep:W,maxElements:D,minElements:E,...S}=e;const w=f(),[V,N]=(0,t.useState)([]);(0,t.useEffect)((()=>{if(s().isEmpty(l)){const e=b.filter((e=>e.isDefault)).map((e=>e.value));N([...e]),I&&y(a,[...e])}else N([...l]),I&&y(a,l)}),[b]),(0,t.useEffect)((()=>{F&&N([...l])}),[l]);return(0,x.jsxs)(d.A,{fullWidth:C,size:j,children:[(0,x.jsx)(u.A,{id:A,children:i}),void 0!==V?(0,x.jsx)(c.A,{...S,id:n,labelId:A,value:V||[],onChange:e=>{var l,t;N(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value),y(a,null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},name:a,input:(0,x.jsx)(o.A,{id:"".concat(n,"_input"),label:i}),renderValue:e=>(0,x.jsx)("div",{className:w.chips,children:e.map((e=>(0,x.jsx)(p.A,{sx:{display:"flex",flexWrap:"wrap"},children:(0,x.jsx)(m.A,{label:e})},e)))}),multiple:!0,children:(null===b||void 0===b?void 0:b.length)&&b.map(((e,l)=>(0,x.jsxs)(h.A,{value:e.value,disabled:g.includes(e.value),children:[(0,x.jsx)(v.A,{primary:e.name}),V.indexOf(e.value)>-1?(0,x.jsx)(r.A,{color:"primary"}):" "]},"".concat(n,"_").concat(l))))}):null]})}},12200:(e,l,a)=>{"use strict";a.d(l,{A:()=>q});var t=a(65043),i=a(53193),s=a(67784),n=a(51787),r=a(77739),d=a(17392),u=a(28242),c=a(69986),o=a(97508),p=a(64851),m=a(83462),h=a(26600),v=a(35316),x=a(68903),f=a(85865),A=a(39336),j=a(29347),b=a(11906),y=a(95540),g=a(5393),C=a(42105),I=a.n(C),F=a(41104),L=a(18545),W=a(5766),D=a(7478);const E=()=>(0,D.A)((e=>({searchTextField:{"@media (max-width: 370px)":{marginTop:5},"@media (min-width: 1800px)":{marginRight:60},"@media (min-width: 1900px)":{marginRight:100},"@media (min-width: 2150px)":{marginRight:10}},splitQueryPreGrid:{paddingBottom:10},splitQueryLabel:{},splitQueryIcon:{padding:0,paddingLeft:4},queryFilterTextField:{color:e.palette.text.primary},queryFilterLabelField:{color:e.palette.secondary.main}})))();var S=a(70579);const w={LowerCase:" and ",UpperCase:" AND "},V={LowerCase:" in ",UpperCase:" IN "},N=["SegmentID"],k=["capture_uuid","segment_uuid"],O=e=>{let{value:l,open:a,setOpen:i,setQueryFilter:s,queryMetada:n,queryLabel:u}=e;const[c,C]=(0,t.useState)(l),[D,O]=(0,t.useState)(""),[_,q]=(0,t.useState)([]),[z,Q]=(0,t.useState)([]),[U,M]=(0,t.useState)([]),T=[...(0,o.d4)((e=>e.labels.data&&e.labels.data.filter((e=>(F.A.isNullOrEmpty(u)||u===e.name)&&!N.includes(e.name))))),...(0,o.d4)((e=>e.metadata.data&&e.metadata.data.filter((e=>(!n||0===n.length||n.includes(e.name))&&!k.includes(e.name)))))],B=E(),R=e=>{O(e),Q((e=>{const l=T.find((l=>l.name===e));return l?l.label_values:[]})(e)),q((e=>{let l;return U&&(l=U.find((l=>l.label===e))),l?l.selectedValues:[]})(e))},P=(e,l)=>{q(l),((e,l)=>{let a;U&&(0===l.length?I()(U,(l=>l.label===e)):(a=U.find((l=>l.label===e)),a?a.selectedValues=l:U.push({label:e,selectedValues:l}))),C(U.map((e=>"[".concat(e.label,"] IN [").concat(e.selectedValues.join(","),"]"))).join(" AND "))})(e,l)},G=()=>{C(l),O(""),q([]),Q([]),M([]),i(!1)},H=e=>"SyntheticEvent"===e.constructor.name?[]:e.replace(V.LowerCase,V.UpperCase).replace(w.LowerCase,w.UpperCase).replace(/\[|]/g,"").split(w.UpperCase).map((e=>{const l=e.split(V.UpperCase);return{label:(l[0]||"").trim(),selectedValues:(l[1]||"").trim().split(",").map((e=>e.trim()))}}));return(0,t.useEffect)((()=>{C(l),O(""),q([]),Q([]),M(l?H(l):[])}),[a,l]),(0,t.useEffect)((()=>{const e=H(l),a=[...n,u],t=e.filter((e=>a.includes(e.label)));s(t.map((e=>"[".concat(e.label,"] IN [").concat(e.selectedValues.join(","),"]"))).join(" AND "))}),[n,u,l]),(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(m.A,{disableEscapeKeyDown:!0,open:a,fullWidth:!0,maxWidth:"md",onClose:G,"aria-labelledby":"form-dialog-title",children:[(0,S.jsx)(h.A,{id:"form-dialog-title",children:"Query Builder"}),(0,S.jsx)(v.A,{children:(0,S.jsxs)(x.Ay,{container:!0,spacing:2,children:[(0,S.jsxs)(x.Ay,{item:!0,xs:!0,children:[(0,S.jsxs)(f.A,{variant:"h6",display:"inline",children:["Filter:"," "]}),(0,S.jsx)(f.A,{variant:"subtitle1",display:"inline",children:"SyntheticEvent"===c.constructor.name?c.constructor.name:c}),(0,S.jsx)(A.A,{})]}),U.map(((e,l)=>(0,S.jsx)(x.Ay,{item:!0,xs:12,children:(0,S.jsxs)(x.Ay,{container:!0,className:B.splitQueryGrid,children:[(0,S.jsx)(x.Ay,{item:!0,children:(0,S.jsx)(r.A,{title:"Delete",children:(0,S.jsx)(d.A,{variant:"contained",style:{color:p.A[800]},fontSize:"small",className:B.splitQueryIcon,onClick:()=>{P(e.label,[]),O("")},size:"large",children:(0,S.jsx)(g.A,{})})})}),(0,S.jsx)(x.Ay,{item:!0,children:(0,S.jsx)(r.A,{title:"Edit",children:(0,S.jsx)(d.A,{variant:"contained",color:"primary",fontSize:"small",className:B.splitQueryIcon,onClick:()=>R(e.label),size:"large",children:(0,S.jsx)(y.A,{})})})}),(0,S.jsx)(x.Ay,{item:!0,className:B.splitQueryLabel,children:(0,S.jsxs)(f.A,{variant:"subtitle1",children:[e.label," IN [",e.selectedValues.join(","),"]"]})})]})},l))),(0,S.jsx)(x.Ay,{item:!0,xs:12,children:(0,S.jsx)(L.A,{id:"labelsList",labelId:"labels",name:"label",label:"Label",fullWidth:!1,onChange:(e,l)=>{R(l)},isUpdateWithDefault:!1,isObserveDefaultValue:!0,defaultValue:D,options:T&&T.map((e=>({name:e.name,value:e.name})))})}),(0,S.jsx)(x.Ay,{item:!0,xs:12,children:(0,S.jsx)(W.A,{id:"sourcesList",labelId:"sourcesListId",name:"source",label:"Source",isUpdateWithDefault:!1,isObserveDefaultValue:!0,defaultValue:_,options:z&&z.map((e=>({name:e.value,value:e.value}))),onChange:(e,l)=>{P(D,l)},displayEmpty:!0})})]})}),(0,S.jsxs)(j.A,{children:[(0,S.jsx)(b.A,{onClick:G,color:"primary",children:"Cancel"}),(0,S.jsx)(b.A,{onClick:()=>{s(c),i(!1)},color:"primary",children:"Done"})]})]})})},_=e=>{let{value:l,onChange:a,isDisabled:o,queryMetada:p,queryLabel:m}=e;const[h,v]=(0,t.useState)(!1),[x,f]=(0,t.useState)(l),A=E();return(0,t.useEffect)((()=>{a(x)}),[x]),(0,t.useEffect)((()=>{f(l)}),[l]),(0,S.jsxs)(c.A,{children:[(0,S.jsx)(i.A,{fullWidth:!0,children:(0,S.jsx)(s.A,{id:"metadata_filter",label:"Query Filter",name:"metadata_filter",value:x,onChange:e=>{a(e)},disabled:o,classes:{root:A.root,disabled:A.disabled},InputLabelProps:{classes:{disabled:A.queryFilterTextField}},InputProps:{classes:{disabled:A.queryFilterTextField},endAdornment:(0,S.jsx)(n.A,{children:(0,S.jsx)(r.A,{title:x,children:(0,S.jsx)(d.A,{id:"queryFilterBtn",onClick:()=>v(!0),size:"large",children:(0,S.jsx)(u.A,{})})})})}})}),(0,S.jsx)(O,{value:x,open:h,setOpen:v,setQueryFilter:f,queryMetada:p,queryLabel:m})]})},q=t.memo(_)},72584:(e,l,a)=>{"use strict";var t=a(24994);l.A=void 0;var i=t(a(40039)),s=a(70579);l.A=(0,i.default)((0,s.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"CheckOutlined")},71612:(e,l,a)=>{"use strict";var t=a(24994);l.A=void 0;var i=t(a(40039)),s=a(70579);l.A=(0,i.default)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined")},5393:(e,l,a)=>{"use strict";var t=a(24994);l.A=void 0;var i=t(a(40039)),s=a(70579);l.A=(0,i.default)((0,s.jsx)("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff")},81627:(e,l,a)=>{var t=a(88140),i=a(69194),s=Array.prototype.splice;e.exports=function(e,l){for(var a=e?l.length:0,n=a-1;a--;){var r=l[a];if(a==n||r!==d){var d=r;i(r)?s.call(e,r,1):t(e,r)}}return e}},53871:e=>{e.exports=function(e,l,a){var t=-1,i=e.length;l<0&&(l=-l>i?0:i+l),(a=a>i?i:a)<0&&(a+=i),i=l>a?0:a-l>>>0,l>>>=0;for(var s=Array(i);++t<i;)s[t]=e[t+l];return s}},88140:(e,l,a)=>{var t=a(35324),i=a(74065),s=a(21676),n=a(70914);e.exports=function(e,l){return l=t(l,e),null==(e=s(e,l))||delete e[n(i(l))]}},21676:(e,l,a)=>{var t=a(52969),i=a(53871);e.exports=function(e,l){return l.length<2?e:t(e,i(l,0,-1))}},74065:e=>{e.exports=function(e){var l=null==e?0:e.length;return l?e[l-1]:void 0}},42105:(e,l,a)=>{var t=a(9096),i=a(81627);e.exports=function(e,l){var a=[];if(!e||!e.length)return a;var s=-1,n=[],r=e.length;for(l=t(l,3);++s<r;){var d=e[s];l(d,s,e)&&(a.push(d),n.push(s))}return i(e,n),a}}}]);
//# sourceMappingURL=200.62083925.chunk.js.map